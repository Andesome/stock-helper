{"version":3,"sources":["utils/common.js","constants/index.js","images/edit-icon.svg","images/save-icon.svg","images/delete-icon.svg","images/add-icon.svg","components/StockItem.js","components/PositionItem.js","components/AddPostionItem.js","components/Position.js","components/StockList.js","components/StockPanel.js","components/SummaryPanel.js","Dashbord.js","App.js","serviceWorker.js","index.js"],"names":["getStockCodes","stocks","map","code","isNaN","toLowerCase","indexOf","toUpperCase","replace","genFnForBC","stock","bcFn","position","price","costPrice","soryBy","key","type","calcFnResult","formula","targetValue","ratio","i","flag","realValue","formulaStr","result","eval","x","y","formatToLocalStocks","name","symbol","initData","localStorage","getItem","pageView","setItem","Number","JSON","stringify","STOCKS","mergeStocks","serverStocks","localStockStr","parse","stockMap","Object","values","reduce","sum","localStock","stockItem","advice","toFixed","jcFn","earnRate","ADVICE_LOSS_RATE","EXPECT_LOSS_RATE","amount","calcStockSummary","stockList","summary","marketValue","costValue","earnMoney","hotMoney","item","adviceAmount","Big","times","plus","valueOf","div","minus","API_BASE_URL","UPDATE_INTERVAL","module","exports","caclClass","number","StockItem","data","url","bcLinkData","eq","color","window","String","Math","abs","jcLinkData","linkData","base64","btoa","calcLink","open","this","props","earningsPerShare","earningCls","className","onClick","handleLinkClick","percent","floor","ceil","Component","SCHEMA","required","min","PostionItem","state","handleInputChange","e","setState","target","value","onComplete","validateShema","keys","every","schemaKey","rule","onDelete","edit","defaultValue","placeholder","onChange","src","DeleteIconSrc","alt","AddPostionItem","handleAdd","onAdd","isValid","some","v","alert","AddIconSrc","Position","handleComplete","index","onItemComplete","stocksMap","filter","length","sort","a","b","handleAddRowClick","addStockItem","core","TYPE_MAP","asce","desc","StockList","useState","setStocks","editStocks","setEditStocks","showPostion","setShowPostion","setSort","split","sortedStocks","useEffect","list","s1","s2","localStocks","onSave","hanldPostionClick","SaveIconSrc","style","display","EditIconSrc","console","log","filterStocks","useStyles","makeStyles","theme","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","StockPanel","panel","classes","React","expanded","setExpanded","ExpansionPanel","event","isExpanded","ExpansionPanelSummary","expandIcon","aria-controls","id","Typography","ExpansionPanelDetails","detial","SummaryPanel","haha","paragraph","$","root","width","timer","DashBord","setStocksMap","setStockList","setSummary","fetchStocks","stockCodes","ajax","dataType","join","success","serverData","status","xhr","error","setInterval","clearInterval","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.758ea9bf.chunk.js","sourcesContent":["import Big from 'big.js';\nimport { STOCKS, EXPECT_LOSS_RATE, ADVICE_LOSS_RATE } from '../constants';\n\n// 对股票id进行处理\nexport function getStockCodes(stocks = []) {\n  return stocks.map(code => {\n    if (isNaN(code[0])) {\n      if (code.toLowerCase().indexOf('us_') > -1) {\n        return code.toUpperCase();\n      } else if (code.indexOf('hk') > -1) {\n        return code;\n      } else {\n        return code\n          .toLowerCase()\n          .replace('sz', '1')\n          .replace('sh', '0');\n      }\n    } else {\n      return (code[0] === '6' ? '0' : '1') + code;\n    }\n  });\n}\n\n// 生成补仓函数\nexport function genFnForBC(stocks = []) {\n  return stocks.map(stock => {\n    stock.bcFn = `((${stock.position}+x)${stock.price})/(${stock.costPrice}*${stock.position} + ${stock.price}x)`;\n    return stock;\n  });\n}\n\nexport function soryBy(key, type) {}\n\n/**\n * 根据反比函数公式，求一个最小近似值\n * @param {*} formula 公式，变量为x\n * @param {*} targetValue 目标值\n */\nexport function calcFnResult(formula = '', targetValue) {\n  const ratio = 100;\n  let i = 1;\n  let flag = true;\n  let realValue = targetValue;\n\n  while (flag) {\n    const formulaStr = formula.replace(/x/g, `*${ratio * i}`);\n    // eslint-disable-next-line no-eval\n    const result = eval(formulaStr);\n    if (result <= targetValue) {\n      realValue = result;\n      flag = false;\n    } else {\n      i++;\n    }\n    // 设置边界值，大于100不在循环，避免进入死循环\n    if (i > 100) {\n      flag = false;\n    }\n  }\n  return { x: ratio * i, y: realValue, targetValue, realValue };\n}\n\n//格式华\nexport function formatToLocalStocks(stocks = []) {\n  return stocks.map(stock => ({\n    name: stock.name,\n    symbol: stock.symbol,\n    costPrice: stock.costPrice,\n    position: stock.position,\n  }));\n}\n\nexport function initData() {\n  if (!localStorage.getItem('pageView')) {\n    localStorage.setItem('stocks', JSON.stringify(STOCKS));\n    localStorage.setItem('pageView', 1);\n  } else {\n    const pageView = localStorage.getItem('pageView');\n    localStorage.setItem('pageView', Number(pageView) + 1);\n  }\n}\n\n// 合并本地和接口数据\nexport function mergeStocks(serverStocks) {\n  const localStockStr = localStorage.getItem('stocks');\n  const STOCKS = localStockStr ? JSON.parse(localStockStr) : [];\n  const stockMap = Object.values(serverStocks).reduce((sum, stock) => {\n    sum[stock.symbol] = stock;\n    return sum;\n  }, {});\n  // 合并成本价、持仓信息\n  const stocks = STOCKS.map(localStock => {\n    if (stockMap[localStock.symbol]) {\n      const stockItem = {\n        ...localStock,\n        ...stockMap[localStock.symbol],\n      };\n      // 每股计算的建议信息\n      let advice = {};\n      const { costPrice, price, position } = stockItem;\n\n      if (costPrice > price) {\n        stockItem.bcFn = `1-(${(position * price).toFixed(2)}+${price}x)/(${costPrice}*${position}+${price}x)`;\n      } else {\n        stockItem.jcFn = `(${(position * price).toFixed(2)}+${price}x)/(${costPrice}*${position}+${price}x)-1`;\n      }\n      stockItem.earnRate = price / costPrice - 1;\n\n      if (stockItem.earnRate < ADVICE_LOSS_RATE) {\n        advice = calcFnResult(stockItem.bcFn, -EXPECT_LOSS_RATE);\n        advice.amount = (advice.x * stockItem.price).toFixed(2);\n      }\n\n      stockItem.advice = advice;\n      return stockItem;\n    } else {\n      return localStock;\n    }\n  });\n\n  return [...stocks];\n}\n\n// 计算持仓汇总信息\nexport function calcStockSummary(stockList) {\n  let summary = {\n    // 市值\n    marketValue: 0,\n    // 成本金额\n    costValue: 0,\n    // 盈亏金额\n    earnMoney: 0,\n    // 平均盈亏率\n    earnRate: 0,\n    // 建议\n    advice: {\n      // 建议流动资金\n      hotMoney: 0,\n    },\n  };\n\n  summary = stockList.reduce((sum, item) => {\n    const adviceAmount = item.advice ? item.advice.amount : 0;\n\n    sum.marketValue = new Big(item.price).times(item.position).plus(sum.marketValue).valueOf();\n\n    sum.costValue = new Big(item.costPrice).times(item.position).plus(sum.costValue).valueOf();\n\n    sum.earnRate = new Big(sum.marketValue).div(sum.costValue).minus(1).toFixed(4).valueOf();\n\n    sum.advice.hotMoney = new Big(sum.advice.hotMoney).plus(Number(adviceAmount || 0)).valueOf();\n\n    return sum;\n  }, summary);\n\n  summary.earnMoney = new Big(summary.marketValue).minus(summary.costValue).valueOf();\n\n  return summary;\n}\n","// 第三方股市报价api\nexport const API_BASE_URL = 'https://api.money.126.net/data/feed/';\n\n// 第三方股市财务api\nexport const API_QUOTE_URL = 'https://stock.xueqiu.com/v5/stock/quote.json';\n\n// 刷新间隔（毫秒）\nexport const UPDATE_INTERVAL = 3000;\n\n// 期望承受亏损比率\nexport const EXPECT_LOSS_RATE = -0.03;\n\n// 亏损建议值： 当亏损率为该值，计算建议\nexport const ADVICE_LOSS_RATE = -0.059;\n\n// 持仓股\nexport const STOCKS = [\n  {\n    name: '伊利股份',\n    // 股票代码\n    symbol: '600887',\n    // 成本价\n    costPrice: 30.243,\n    // 仓位，多少股\n    position: 400,\n  },\n  {\n    name: '中国平安',\n    // 股票代码\n    symbol: '601318',\n    // 成本价\n    costPrice: 77.987,\n    // 仓位，多少股\n    position: 200,\n  },\n  {\n    name: '格力电器',\n    // 股票代码\n    symbol: '000651',\n    // 成本价\n    costPrice: 60.625,\n    // 仓位，多少股\n    position: 200,\n  },\n  {\n    name: '东山精密',\n    // 股票代码\n    symbol: '002384',\n    // 成本价\n    costPrice: 28.213,\n    // 仓位，多少股\n    position: 400,\n  },\n  {\n    name: '华天科技',\n    // 股票代码\n    symbol: '002185',\n    // 成本价\n    costPrice: 12.870,\n    // 仓位，多少股\n    position: 100,\n  },\n  {\n    name: '华新水泥',\n    // 股票代码\n    symbol: '600801',\n    // 成本价\n    costPrice: 23.813,\n    // 仓位，多少股\n    position: 400,\n  },\n  {\n    name: '海螺水泥',\n    // 股票代码\n    symbol: '600585',\n    // 成本价\n    costPrice: 51.851,\n    // 仓位，多少股\n    position: 100,\n  },\n];\n","module.exports = __webpack_public_path__ + \"static/media/edit-icon.47681e14.svg\";","module.exports = __webpack_public_path__ + \"static/media/save-icon.c5e730ea.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete-icon.7d8cde5e.svg\";","module.exports = __webpack_public_path__ + \"static/media/add-icon.4f995bf3.svg\";","import React, { Component } from 'react';\n\nimport './StockItem.scss';\n\nfunction caclClass(number) {\n  if (number > 0) {\n    return 'red';\n  } else if (number < 0) {\n    return 'green';\n  } else {\n    return 'default';\n  }\n}\n\nfunction calcLink(data) {\n  const bcLinkData = [\n    { type: 0, eq: data.bcFn, color: '#13AD13' },\n    { type: 1000, window: ['-200', '1500', '0', String(Math.abs(data.earnRate * (1.5).toFixed(2)))] },\n  ];\n  const jcLinkData = [\n    { type: 0, eq: data.jcFn, color: '#ED1717' },\n    { type: 1000, window: ['-100', '500', '0', String(Math.abs(data.earnRate * (1.5).toFixed(2)))] },\n  ];\n  const linkData = data.costPrice > data.price ? bcLinkData : jcLinkData;\n  // replace这一步是因为绘图网站http://fooplot.com的base64算法使用-代替=填充\n  const base64 = window.btoa(JSON.stringify(linkData)).replace(/=/g, '-');\n\n  return `http://fooplot.com/#${base64}`;\n}\n\nexport default class StockItem extends Component {\n  // 点击补仓函数跳转至函数绘图网站\n  handleLinkClick(data) {\n    const url = calcLink(data);\n    window.open(url, data.name);\n  }\n\n  render() {\n    const { data } = this.props;\n    // 每股收益\n    const earningsPerShare = data.price - data.costPrice;\n    const earningCls = caclClass(earningsPerShare);\n\n\n    // 计算达到预期亏损的补仓建议\n    let { advice } = data;\n\n    return (\n      <div className=\"stock-item\">\n        <h3>{data.name || '无名股票'}</h3>\n        <div className=\"stock-spc-item\">\n          <label className=\"stock-item-label\">{earningsPerShare < 0 ? '补仓函数' : '加仓函数'}:</label>\n          <span\n            className=\"stock-item-value link\"\n            onClick={() => {\n              this.handleLinkClick(data);\n            }}\n          >\n            {earningsPerShare < 0 ? data.bcFn : data.jcFn}\n          </span>\n        </div>\n        <div className=\"stock-spc-item\">\n          <label className=\"stock-item-label\">盈亏:</label>\n          <span className={`stock-item-value ${earningCls}`}>{(data.earnRate * 100).toFixed(3)}%</span>\n        </div>\n        <div className=\"stock-spc-item\">\n          <label className=\"stock-item-label\">成本:</label>\n          <span className=\"stock-item-value\">{data.costPrice}</span>\n        </div>\n        <div className=\"white-blank\"></div>\n        <div className=\"stock-spc-item\">\n          <label className=\"stock-item-label\">现价:</label>\n          <span className=\"stock-item-value\">{data.price}</span>\n        </div>\n        <div className=\"stock-spc-item\">\n          <label className=\"stock-item-label\">涨幅:</label>\n          <span className={`stock-item-value ${caclClass(data.percent)}`}>{(data.percent * 100).toFixed(2)}%</span>\n        </div>\n        <div className=\"white-blank\"></div>\n        {advice.x && (\n          <div className=\"stock-spc-item advice-item\">\n            <label className=\"stock-item-label\">建议:</label>\n            <span className=\"stock-item-value advice-value\">\n              目前您的亏损超过了{Math.floor(Math.abs(data.earnRate) * 100)}%。建议补仓<b className=\"mark\">{advice.x}</b>\n              手， 需要资金\n              <b className=\"mark\">¥{Math.ceil(data.price * advice.x)}</b>, 可将亏损降至\n              <b className=\"mark\">{(advice.realValue * 100).toFixed(3)}%</b>。\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport DeleteIconSrc from '../images/delete-icon.svg';\n\nimport './PositionItem.scss';\n\nconst SCHEMA = {\n  name: {\n    required: false,\n  },\n  symbol: {\n    required: true,\n  },\n  costPrice: {\n    required: true,\n    min: 1,\n  },\n  position: {\n    required: true,\n    min: 100,\n  },\n};\n\nexport default class PostionItem extends Component {\n  state = {\n    stock: {},\n  };\n\n  // handle input item change\n  handleInputChange = (key, e) => {\n    const { stock } = this.state;\n\n    this.setState(\n      {\n        stock: {\n          ...stock,\n          [key]: String(e.target.value).replace(/\\s/g, ''),\n        },\n      },\n      () => {\n        const { onComplete } = this.props;\n        const isValid = this.validateShema();\n\n        isValid && onComplete({ ...this.state.stock });\n      },\n    );\n  };\n\n  validateShema = () => {\n    const { stock } = this.state;\n\n    return Object.keys(SCHEMA).every(schemaKey => {\n      const rule = SCHEMA[schemaKey];\n\n      if (stock[schemaKey]) {\n        return rule.required ? stock[schemaKey] : true;\n      } else {\n        return !rule.required;\n      }\n    });\n  };\n\n  onDelete = e => {\n    const { onDelete, data } = this.props;\n\n    onDelete && onDelete(data, e);\n  };\n\n  render() {\n    const { edit = false, data = {} } = this.props;\n    return (\n      <div className=\"postion-item-box\">\n        {edit ? (\n          <div className=\"position-edit-item\">\n            <div className=\"col stock-name\">\n              <input\n                type=\"text\"\n                defaultValue={data.name || ''}\n                placeholder=\"[可填]名称\"\n                onChange={e => this.handleInputChange('name', e)}\n              />\n            </div>\n            <div className=\"col stock-code\">\n              <input\n                type=\"text\"\n                defaultValue={data.symbol || ''}\n                placeholder=\"* 代码\"\n                onChange={e => this.handleInputChange('symbol', e)}\n              />\n            </div>\n            <div className=\"col stock-cost-price\">\n              <input\n                type=\"number\"\n                defaultValue={data.costPrice || ''}\n                placeholder=\"* 成本\"\n                onChange={e => this.handleInputChange('costPrice', e)}\n              />\n            </div>\n            <div className=\"col stock-postion\">\n              <input\n                type=\"number\"\n                defaultValue={data.position || ''}\n                placeholder=\"* 持仓(股)\"\n                onChange={e => this.handleInputChange('position', e)}\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"position-show-item\">\n            <div className=\"col stock-name\">{data.name || ''}</div>\n            <div className=\"col stock-code\">{data.symbol}</div>\n            <div className=\"col stock-cost-price\">{data.costPrice}</div>\n            <div className=\"col stock-postion\">\n              <span>{data.position}</span>\n              <img className=\"delete-btn\" src={DeleteIconSrc} alt=\"delete\" onClick={this.onDelete} />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport AddIconSrc from '../images/add-icon.svg';\n\nimport './PositionItem.scss';\n\nconst SCHEMA = {\n  name: {\n    required: false,\n  },\n  symbol: {\n    required: true,\n  },\n  costPrice: {\n    required: true,\n    min: 1,\n  },\n  position: {\n    required: true,\n    min: 100,\n  },\n};\n\nexport default class AddPostionItem extends Component {\n  state = {\n    stock: {},\n  };\n\n  // handle input item change\n  handleInputChange = (key, e) => {\n    const { stock } = this.state;\n\n    this.setState(\n      {\n        stock: {\n          ...stock,\n          [key]: String(e.target.value).replace(/\\s/g, ''),\n        },\n      },\n      () => {\n        const { onComplete } = this.props;\n        const isValid = this.validateShema();\n\n        isValid && onComplete({ ...this.state.stock });\n      },\n    );\n  };\n\n  validateShema = () => {\n    const { stock } = this.state;\n\n    return Object.keys(SCHEMA).every(schemaKey => {\n      const rule = SCHEMA[schemaKey];\n\n      if (stock[schemaKey]) {\n        return rule.required ? stock[schemaKey] : true;\n      } else {\n        return !rule.required;\n      }\n    });\n  };\n\n  handleAdd = () => {\n    const { onAdd, stocks = [] } = this.props;\n    const { stock } = this.state;\n    const isValid = this.validateShema();\n\n    const isExitStock = stocks.some(v => String(v.symbol) === stock.symbol);\n\n    if (isExitStock) {\n      alert('该股票已存在了，请不要重复添加');\n    } else if (isValid) {\n      onAdd && onAdd({ ...stock });\n      this.setState({\n        stock: {},\n      });\n    } else {\n      alert('请把上方的数据填写完整，再添加新的一条～');\n    }\n  };\n\n  render() {\n    const { stock } = this.state;\n\n    return (\n      <div className=\"postion-item-box\">\n        <div className=\"position-edit-item\">\n          <div className=\"col stock-name\">\n            <input\n              type=\"text\"\n              value={stock.name || ''}\n              placeholder=\"[可填]名称\"\n              onChange={e => this.handleInputChange('name', e)}\n            />\n          </div>\n          <div className=\"col stock-code\">\n            <input\n              type=\"text\"\n              defaultValue={stock.symbol || ''}\n              placeholder=\"* 代码\"\n              onChange={e => this.handleInputChange('symbol', e)}\n            />\n          </div>\n          <div className=\"col stock-cost-price\">\n            <input\n              type=\"number\"\n              defaultValue={stock.costPrice || ''}\n              placeholder=\"* 成本\"\n              onChange={e => this.handleInputChange('costPrice', e)}\n            />\n          </div>\n          <div className=\"col stock-postion\">\n            <input\n              type=\"number\"\n              defaultValue={stock.position || ''}\n              placeholder=\"* 持仓(股)\"\n              onChange={e => this.handleInputChange('position', e)}\n            />\n          </div>\n        </div>\n        <div className=\"add-line\">\n          <div className=\"add-line-btn\" onClick={this.handleAdd}>\n            <img src={AddIconSrc} alt=\"add btn\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PositionItem from './PositionItem';\nimport AddPostionItem from './AddPostionItem';\n\nimport './Position.scss';\n\nexport default class Position extends Component {\n  componentDidMount() {\n    const { stocks = [], core } = this.props;\n\n    this.stocks = stocks;\n    core && core(this);\n  }\n\n  handleComplete = (data, index) => {\n    const { stocks = [], onItemComplete } = this.props;\n    const stocksMap = stocks.reduce((map, stock, index) => {\n      stock.index = index;\n      map[stock.symbol] = stock;\n      return map;\n    }, {});\n\n    const sameCodeStocks = Object.values(stocksMap).filter(v => String(v.symbol) === String(data.symbol));\n\n    if (sameCodeStocks.length > 1) {\n      alert('该股票已存在了，你可以点击修改~');\n    } else {\n      data.index = index;\n      stocksMap[data.symbol] = data;\n\n      this.stocks = Object.values(stocksMap).sort((a, b) => a.index - b.index);\n      onItemComplete && onItemComplete(data, this.stocks);\n    }\n  };\n\n  // 点击添加一行按钮\n  handleAddRowClick = (addStockItem) => {\n    const { onAdd } = this.props;\n\n    onAdd && onAdd(this.stocks);\n  };\n\n  onDelete = data => {\n    const { onDelete } = this.props;\n\n    onDelete && onDelete(data);\n  };\n\n  render() {\n    const { stocks } = this.props;\n\n    return (\n      <div className=\"stocks-list-wrap\">\n        <div className=\"postion-list-header\">\n          <div className=\"th\">名称</div>\n          <div className=\"th\">代码</div>\n          <div className=\"th\">成本</div>\n          <div className=\"th\">持仓</div>\n        </div>\n        {stocks.map((stock, index) => (\n          <PositionItem\n            key={stock.symbol}\n            data={stock}\n            onComplete={data => this.handleComplete(data, index)}\n            onDelete={this.onDelete}\n          />\n        ))}\n        {/*添加行 */}\n        <AddPostionItem\n          key={stocks.length}\n          stocks={stocks}\n          onComplete={data => this.handleComplete(data, stocks.length)}\n          onAdd={this.handleAddRowClick}\n        />\n      </div>\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport StockItem from './StockItem';\nimport { formatToLocalStocks } from '../utils/common';\nimport EditIconSrc from '../images/edit-icon.svg';\nimport SaveIconSrc from '../images/save-icon.svg';\nimport Position from './Position';\n\nimport './Stock.scss';\n\nconst TYPE_MAP = {\n  asce: 1,\n  desc: -1,\n};\n\nexport default function StockList(props) {\n  const [stocks, setStocks] = useState([]);\n  const [editStocks, setEditStocks] = useState([]);\n  const [showPostion, setShowPostion] = useState(false);\n  const [sort, setSort] = useState('default');\n  const [key, type] = sort.split(':');\n  let sortedStocks = [...stocks];\n\n  useEffect(() => {\n    setStocks(props.list);\n    setEditStocks(props.list);\n  }, [props.list]);\n\n  // 点击添加按钮\n  const handleAdd = stocks => {\n    setEditStocks(stocks);\n  };\n\n  // 持仓添加/修改改变\n  const handlePostionComplete = (data, stocks) => {\n    console.log('编辑', data, stocks);\n  };\n\n  // 保存/修改持仓\n  const hanldPostionClick = type => {\n    setShowPostion(!showPostion);\n    if (type === 'save') {\n      const localStocks = formatToLocalStocks(StockList.core.stocks);\n      localStorage.setItem('stocks', JSON.stringify(localStocks));\n      props.onSave && props.onSave();\n    }\n  };\n\n  // 排序选择权改变\n  const handleSortChange = e => {\n    setSort(e.target.value);\n  };\n\n  // 处理删除持仓\n  const handleDletePosition = data => {\n    const filterStocks = StockList.core.stocks.filter(v => String(v.symbol) !== String(data.symbol));\n\n    setEditStocks([...filterStocks]);\n    StockList.core.stocks = filterStocks;\n  };\n\n  if (key === 'default') {\n    sortedStocks = stocks || [];\n  } else {\n    const ratio = TYPE_MAP[type] || 1;\n    sortedStocks = stocks.sort((s1, s2) => (s1[key] - s2[key]) * ratio);\n  }\n\n  return (\n    <div className=\"stock-list-wrap\">\n      <div className=\"tools-box\">\n        <div className=\"sort-tool\">\n          sort by\n          <select onChange={handleSortChange}>\n            <option value=\"default\">default</option>\n            <option value=\"earnRate:asce\">盈亏⬆</option>\n            <option value=\"earnRate:desc\">盈亏⬇</option>\n            <option value=\"percent:asce\">涨幅⬆</option>\n            <option value=\"percent:desc\">涨幅⬇</option>\n          </select>\n        </div>\n        <div className=\"position-tool\" onClick={() => hanldPostionClick(showPostion ? 'save' : 'edit')}>\n          <span>{showPostion ? '保存' : '修改持仓'}</span>\n          <img src={SaveIconSrc} alt=\"save\" style={{ display: showPostion ? 'block' : 'none' }} />\n          <img src={EditIconSrc} alt=\"edit\" style={{ display: showPostion ? 'none' : 'block' }} />\n        </div>\n      </div>\n      {showPostion && (\n        <Position\n          core={core => (StockList.core = core)}\n          stocks={editStocks || stocks || []}\n          onItemComplete={handlePostionComplete}\n          onAdd={handleAdd}\n          onDelete={handleDletePosition}\n        />\n      )}\n      <div className=\"stock-list\">\n        {sortedStocks.map(stock => (\n          <StockItem key={stock.symbol} data={stock} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Typography from '@material-ui/core/Typography';\nimport StockList from './StockList';\n\nconst useStyles = makeStyles(theme => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    flexBasis: '33.33%',\n    flexShrink: 0,\n  },\n}));\n\nexport default function StockPanel(props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState('panel2');\n\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n\n  const { map, list, onSave } = props;\n\n  return (\n    <ExpansionPanel expanded={expanded === 'panel2'} onChange={handleChange('panel2')}>\n      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />} aria-controls=\"panel2bh-content\" id=\"panel2bh-header\">\n        <Typography className={classes.heading}>持仓</Typography>\n        {/* <Typography className={classes.secondaryHeading}>\n            You are currently not an owner\n          </Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <StockList map={map} list={list} onSave={onSave} />\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n  panel: {\n    display: 'block',\n  },\n  detial: {\n    display: 'block',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    flexBasis: '33.33%',\n    flexShrink: 0,\n  },\n}));\n\nexport default function SummaryPanel(props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState('panel1');\n\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n\n  const { summary = {} } = props;\n\n  return (\n    <ExpansionPanel className={classes.haha} expanded={expanded === 'panel1'} onChange={handleChange('panel1')}>\n      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />} aria-controls=\"panel2bh-content\" id=\"panel2bh-header\">\n        <Typography className={classes.heading}>总览</Typography>\n        {/* <Typography className={classes.secondaryHeading}>\n            You are currently not an owner\n          </Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className={classes.detial}>\n        <Typography display=\"block\" paragraph>\n          <span>你持仓的总市值为{summary.marketValue}。</span>\n          <span>总成本为{summary.costValue}。</span>\n          <span>\n            目前{summary.earnMoney >= 0 ? '盈利' : '亏损'} {Math.abs(summary.earnMoney)}元。\n          </span>\n          <span>盈亏率：{summary.earnRate * 100}%。</span>\n        </Typography>\n        {Object.keys(summary.advice || {}).length > 0 && (\n          <Typography display=\"block\" color=\"error\">\n            建议账户保留流动资金{summary.advice?.hotMoney}元，以应对风险。\n          </Typography>\n        )}\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport StockPanel from './components/StockPanel';\nimport SummaryPanel from './components/SummaryPanel';\nimport { API_BASE_URL, UPDATE_INTERVAL } from './constants';\nimport { getStockCodes, calcStockSummary, initData, mergeStocks } from './utils/common';\n\nconst $ = window.$;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n  },\n}));\n// 定时器\nlet timer = null;\n\nexport default function DashBord() {\n  const classes = useStyles();\n  const [stocksMap, setStocksMap] = useState({});\n  const [stockList, setStockList] = useState([]);\n  const [summary, setSummary] = useState({});\n\n  useEffect(() => {\n    initData();\n    fetchStocks();\n\n    timer = setInterval(() => {\n      fetchStocks();\n    }, UPDATE_INTERVAL);\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  // 获取股票信息\n  function fetchStocks() {\n    const localStockStr = localStorage.getItem('stocks');\n    const STOCKS = localStockStr ? JSON.parse(localStockStr) : [];\n    const stockCodes = STOCKS.map(stock => String(stock.symbol));\n\n    $ &&\n      stockCodes.length > 0 &&\n      $.ajax({\n        type: 'GET',\n        dataType: 'jsonp',\n        url: `${API_BASE_URL}${getStockCodes(stockCodes).join(',')}`,\n        success: function(serverData, status, xhr) {\n          const stockList = mergeStocks(serverData);\n          const summary = calcStockSummary(stockList);\n          setStocksMap(serverData);\n          setStockList(stockList);\n          setSummary(summary);\n        },\n        error: function(e) {\n          console.error('请求接口错误');\n        },\n      });\n  }\n\n  function handleSave() {\n    fetchStocks();\n  }\n\n  return (\n    <div className={classes.root}>\n      <SummaryPanel map={stocksMap} list={stockList} summary={summary} />\n      <StockPanel map={stocksMap} list={stockList} onSave={handleSave} />\n    </div>\n  );\n}\n","import React from 'react';\nimport Dashbord from './Dashbord';\n\nimport './App.scss';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <h2>STOCK HELPER</h2>\n      <Dashbord />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}