(this["webpackJsonpstock-helper"]=this["webpackJsonpstock-helper"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),c=a.n(r),l=(a(94),a(10)),i=a(11),s=a(131),m=a(135),u=a(147),d=a(141),p=a(139),_=a(140),b=a(138),f=a(134),E=Object(s.a)((function(e){return{button:{color:"#555",fontSize:12}}})),v=o.a.forwardRef((function(e,t){return o.a.createElement(f.a,Object.assign({direction:"up",ref:t},e))}));function h(e){var t=E(),a=o.a.useState(!1),n=Object(i.a)(a,2),r=n[0],c=n[1],l=function(){c(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{size:"small",onClick:function(){c(!0)},className:t.button},"reset"),o.a.createElement(u.a,{open:r,TransitionComponent:v,keepMounted:!0,onClose:l,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(b.a,{id:"alert-dialog-slide-title"},"\u786e\u5b9a\u8981\u91cd\u7f6e\u6301\u4ed3\u5417?"),o.a.createElement(p.a,null,o.a.createElement(_.a,{id:"alert-dialog-slide-description"},"\u91cd\u7f6e\u540e\u6301\u4ed3\u5c06\u6062\u590d\u9ed8\u8ba4\u7684\u793a\u4f8b\u6570\u636e\uff0c\u8be5\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500\u3002")),o.a.createElement(d.a,null,o.a.createElement(m.a,{onClick:l,color:"primary"},"\u53d6\u6d88"),o.a.createElement(m.a,{onClick:function(){c(!1),e.onConfirm&&e.onConfirm()},color:"primary"},"\u786e\u5b9a"))))}var k=a(104),g=a(144),O=a(67),y=a.n(O),j=Object(s.a)((function(e){return{button:{color:"#888",textTransform:"uppercase",fontSize:12},icon:{fontSize:16},tips:{fontSize:14}}})),S=o.a.forwardRef((function(e,t){return o.a.createElement(f.a,Object.assign({direction:"up",ref:t},e))}));function N(e){var t=j(),a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)(""),f=Object(i.a)(s,2),E=f[0],v=f[1],h=Object(n.useState)(""),O=Object(i.a)(h,2),N=O[0],C=O[1],w=function(){l(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,{"aria-label":"import",size:"small",onClick:function(){l(!0)},className:t.button},o.a.createElement(y.a,{size:"small",className:t.icon})),o.a.createElement(u.a,{open:c,TransitionComponent:S,keepMounted:!0,onClose:w,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement("form",{onSubmit:function(t,a){t.preventDefault();var n=!1;try{n=JSON.parse(E),C(!1)}catch(o){return console.log("error",o),void C("JSON\u89e3\u6790\u9519\u8bef, \u8bf7\u6838\u9a8c\u683c\u5f0f\u662f\u5426\u6b63\u786e")}Array.isArray(n)?n&&(l(!1),v(""),e.onConfirm&&e.onConfirm(n)):C("JSON\u5fc5\u987b\u662f\u4e00\u4e2a\u6301\u4ed3\u6570\u7ec4")}},o.a.createElement(b.a,{id:"alert-dialog-slide-title"},"\u5bfc\u5165\u6570\u636e"),o.a.createElement(p.a,null,o.a.createElement(_.a,{id:"alert-dialog-slide-description",className:t.tips},"\u4f60\u53ef\u4ee5\u901a\u8fc7\u5bfc\u5165JSON\u6765\u5feb\u901f\u521d\u59cb\u5316\u4f60\u7684\u6301\u4ed3\u6570\u636e\u3002\u8be5\u64cd\u4f5c\u4f1a\u8986\u76d6\u73b0\u6709\u6570\u636e\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002"),o.a.createElement(g.a,{required:!0,autoFocus:!0,multiline:!0,rowsMax:"6",rows:"2",variant:"outlined",margin:"dense",name:"position",id:"position",label:"JSON\u5b57\u7b26\u4e32",type:"text",error:Boolean(N),helperText:N,value:E,onChange:function(e){var t=String(e.target.value).trim();v(t),""===t&&C(!1)},InputProps:{inputProps:{pattern:/^\D/}},fullWidth:!0})),o.a.createElement(d.a,null,o.a.createElement(m.a,{onClick:w,color:"primary"},"\u53d6\u6d88"),o.a.createElement(m.a,{onClick:function(){},color:"primary",type:"submit"},"\u786e\u5b9a")))))}var C=a(146),w=a(143),x=a(142),P=a(52),M=a.n(P),R=a(72),D=a(41),I=a(21),A=a(22),T=a(24),V=a(23),F=a(26);a(99);function q(e){return e>0?"red":e<0?"green":"default"}var B=function(e){function t(){return Object(I.a)(this,t),Object(T.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(A.a)(t,[{key:"handleLinkClick",value:function(e){var t=function(e){var t=[{type:0,eq:e.bcFn,color:"#13AD13"},{type:1e3,window:["-200","1500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],a=[{type:0,eq:e.jcFn,color:"#ED1717"},{type:1e3,window:["-100","500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],n=e.costPrice>e.price?t:a,o=window.btoa(JSON.stringify(n)).replace(/=/g,"-");return"http://fooplot.com/#".concat(o)}(e);window.open(t,e.name)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.summary,r=a.price-a.costPrice,c=q(r),l=a.advice,i=n.earn.maxAbsRate,s={flex:(Math.abs(a.earnRate)/i).toFixed(2)};return o.a.createElement("div",{className:"stock-item ".concat(c)},o.a.createElement("h3",null,a.name||"\u65e0\u540d\u80a1\u7968"),o.a.createElement("div",{className:"stock-spc-item earn-rate-item"},o.a.createElement("label",{className:"stock-item-label"},"\u76c8\u4e8f\u6bd4"),o.a.createElement("span",{className:"stock-item-value ".concat(c," weight"),style:s},(100*a.earnRate).toFixed(3),"%")),o.a.createElement("div",{className:"stock-spc-item"},o.a.createElement("label",{className:"stock-item-label"},r>=0?"\u6d6e\u76c8":"\u6d6e\u4e8f"),o.a.createElement("span",{className:"stock-item-value ".concat(c," earn-amount")},(a.earnRate*a.costPrice*a.position).toFixed(2))),o.a.createElement("div",{className:"white-blank"}),o.a.createElement("div",{className:"stock-spc-item"},o.a.createElement("label",{className:"stock-item-label"},"\u6210\u672c"),o.a.createElement("span",{className:"stock-item-value"},a.costPrice)),o.a.createElement("div",{className:"stock-spc-item"},o.a.createElement("label",{className:"stock-item-label"},"\u73b0\u4ef7"),o.a.createElement("span",{className:"stock-item-value"},a.price)),o.a.createElement("div",{className:"stock-spc-item percent-item"},o.a.createElement("label",{className:"stock-item-label"},"\u5f53\u524d",a.percent>=0?"\u6da8":"\u8dcc","\u5e45"),o.a.createElement("span",{className:"stock-item-value weight ".concat(q(a.percent))},(100*a.percent).toFixed(2),"%",o.a.createElement("i",{className:"percent-bar",style:{width:"".concat(Math.abs(1e3*a.percent),"%")}}))),o.a.createElement("div",{className:"white-blank"}),o.a.createElement("div",{className:"stock-spc-item"},o.a.createElement("label",{className:"stock-item-label"},r<0?"\u8865\u4ed3\u51fd\u6570":"\u52a0\u4ed3\u51fd\u6570"),o.a.createElement("span",{className:"stock-item-value",onClick:function(){e.handleLinkClick(a)}},o.a.createElement("span",{className:"link"},"\u67e5\u770b"))),o.a.createElement("div",{className:"white-blank"}),l.x&&o.a.createElement("div",{className:"stock-spc-item advice-item"},o.a.createElement("label",{className:"stock-item-label"},"\u5efa\u8bae"),o.a.createElement("span",{className:"stock-item-value advice-value"},"\u76ee\u524d\u60a8\u7684\u4e8f\u635f\u8d85\u8fc7\u4e86",Math.floor(100*Math.abs(a.earnRate)),"%\u3002\u5efa\u8bae\u8865\u4ed3",o.a.createElement("b",{className:"mark"},l.x),"\u624b\uff0c \u9700\u8981\u8d44\u91d1",o.a.createElement("b",{className:"mark"},"\xa5",Math.ceil(a.price*l.x)),", \u53ef\u5c06\u4e8f\u635f\u964d\u81f3",o.a.createElement("b",{className:"mark"},(100*l.realValue).toFixed(3),"%"),"\u3002")))}}]),t}(n.Component),L=a(18),U=a(68),W=a.n(U),K=a(69),J=a.n(K),z=a(31),Y=a(70),$=a.n(Y),G=(a(65),{name:{required:!1},symbol:{required:!0},costPrice:{required:!0,min:1},position:{required:!0,min:100}}),H=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(T.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(o)))).state={stock:{}},a.handleInputChange=function(e,t){var n=a.state.stock;a.setState({stock:Object(l.a)({},n,Object(z.a)({},e,String(t.target.value).replace(/\s/g,"")))},(function(){var e=a.props.onComplete;a.validateShema()&&e(Object(l.a)({},a.state.stock))}))},a.validateShema=function(){var e=a.state.stock;return Object.keys(G).every((function(t){var a=G[t];return e[t]?!a.required||e[t]:!a.required}))},a.onDelete=function(e){var t=a.props,n=t.onDelete,o=t.data;n&&n(o,e)},a}return Object(F.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.edit,n=void 0!==a&&a,r=t.data,c=void 0===r?{}:r;return o.a.createElement("div",{className:"postion-item-box"},n?o.a.createElement("div",{className:"position-edit-item"},o.a.createElement("div",{className:"col stock-name"},o.a.createElement("input",{type:"text",defaultValue:c.name||"",placeholder:"[\u53ef\u586b]\u540d\u79f0",onChange:function(t){return e.handleInputChange("name",t)}})),o.a.createElement("div",{className:"col stock-code"},o.a.createElement("input",{type:"text",defaultValue:c.symbol||"",placeholder:"* \u4ee3\u7801",onChange:function(t){return e.handleInputChange("symbol",t)}})),o.a.createElement("div",{className:"col stock-cost-price"},o.a.createElement("input",{type:"number",defaultValue:c.costPrice||"",placeholder:"* \u6210\u672c",onChange:function(t){return e.handleInputChange("costPrice",t)}})),o.a.createElement("div",{className:"col stock-postion"},o.a.createElement("input",{type:"number",defaultValue:c.position||"",placeholder:"* \u6301\u4ed3(\u80a1)",onChange:function(t){return e.handleInputChange("position",t)}}))):o.a.createElement("div",{className:"position-show-item"},o.a.createElement("div",{className:"col stock-name"},c.name||""),o.a.createElement("div",{className:"col stock-code"},c.symbol),o.a.createElement("div",{className:"col stock-cost-price"},c.costPrice),o.a.createElement("div",{className:"col stock-postion"},o.a.createElement("span",null,c.position),o.a.createElement("img",{className:"delete-btn",src:$.a,alt:"delete",onClick:this.onDelete}))))}}]),t}(n.Component),Q=a(71),X=a.n(Q),Z={name:{required:!1},symbol:{required:!0},costPrice:{required:!0,min:1},position:{required:!0,min:100}},ee=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(T.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(o)))).state={stock:{}},a.handleInputChange=function(e,t){var n=a.state.stock;a.setState({stock:Object(l.a)({},n,Object(z.a)({},e,String(t.target.value).replace(/\s/g,"")))},(function(){var e=a.props.onComplete;a.validateShema()&&e(Object(l.a)({},a.state.stock))}))},a.validateShema=function(){var e=a.state.stock;return Object.keys(Z).every((function(t){var a=Z[t];return e[t]?!a.required||e[t]:!a.required}))},a.handleAdd=function(){var e=a.props,t=e.onAdd,n=e.stocks,o=void 0===n?[]:n,r=a.state.stock,c=a.validateShema();o.some((function(e){return String(e.symbol)===r.symbol}))?alert("\u8be5\u80a1\u7968\u5df2\u5b58\u5728\u4e86\uff0c\u8bf7\u4e0d\u8981\u91cd\u590d\u6dfb\u52a0"):c?(t&&t(Object(l.a)({},r)),a.setState({stock:{}})):alert("\u8bf7\u628a\u4e0a\u65b9\u7684\u6570\u636e\u586b\u5199\u5b8c\u6574\uff0c\u518d\u6dfb\u52a0\u65b0\u7684\u4e00\u6761\uff5e")},a}return Object(F.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.state.stock;return o.a.createElement("div",{className:"postion-item-box"},o.a.createElement("div",{className:"position-edit-item"},o.a.createElement("div",{className:"col stock-code"},o.a.createElement("input",{type:"text",defaultValue:t.symbol||"",placeholder:"* \u80a1\u7968\u4ee3\u7801",onChange:function(t){return e.handleInputChange("symbol",t)}})),o.a.createElement("div",{className:"col stock-cost-price"},o.a.createElement("input",{type:"number",defaultValue:t.costPrice||"",placeholder:"* \u6210\u672c",onChange:function(t){return e.handleInputChange("costPrice",t)}})),o.a.createElement("div",{className:"col stock-postion"},o.a.createElement("input",{type:"number",defaultValue:t.position||"",placeholder:"* \u6301\u4ed3(\u80a1)",onChange:function(t){return e.handleInputChange("position",t)}}))),o.a.createElement("div",{className:"add-line"},o.a.createElement("div",{className:"add-line-btn",onClick:this.handleAdd},o.a.createElement("img",{src:X.a,alt:"add btn"}))))}}]),t}(n.Component),te=(a(100),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(T.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(o)))).handleComplete=function(e,t){var n=a.props,o=n.stocks,r=void 0===o?[]:o,c=n.onItemComplete,l=r.reduce((function(e,t,a){return t.index=a,e[t.symbol]=t,e}),{});Object.values(l).filter((function(t){return String(t.symbol)===String(e.symbol)})).length>1?alert("\u8be5\u80a1\u7968\u5df2\u5b58\u5728\u4e86\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4fee\u6539~"):(e.index=t,l[e.symbol]=e,a.stocks=Object.values(l).sort((function(e,t){return e.index-t.index})),c&&c(e,a.stocks))},a.handleAddRowClick=function(e){var t=a.props.onAdd;t&&t(a.stocks)},a.onDelete=function(e){var t=a.props.onDelete;t&&t(e)},a}return Object(F.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.stocks,a=void 0===t?[]:t,n=e.core;this.stocks=a,n&&n(this)}},{key:"render",value:function(){var e=this,t=this.props.stocks;return o.a.createElement("div",{className:"stocks-list-wrap"},o.a.createElement("div",{className:"postion-list-header"},o.a.createElement("div",{className:"th"},"\u540d\u79f0"),o.a.createElement("div",{className:"th"},"\u4ee3\u7801"),o.a.createElement("div",{className:"th"},"\u6210\u672c"),o.a.createElement("div",{className:"th"},"\u6301\u4ed3")),t.map((function(t,a){return o.a.createElement(H,{key:t.symbol,data:t,onComplete:function(t){return e.handleComplete(t,a)},onDelete:e.onDelete})})),o.a.createElement(ee,{key:t.length,stocks:t,onComplete:function(a){return e.handleComplete(a,t.length)},onAdd:this.handleAddRowClick}))}}]),t}(n.Component)),ae={showPostion:!1,isEdit:!1};function ne(e,t){switch(console.log("stockReducer",e,t),t.type){case"ADD":case"EDIT":return Object(l.a)({},e,{showPostion:!0,isEdit:!0});case"SAVE":case"RESET":return Object(l.a)({},e,{showPostion:!1,isEdit:!1});case"INIT":return a=t.payload,Object(l.a)({},ae,{},a);case"SET":return Object(l.a)({},e,{},t.payload);case"SET_SUMMARY":return Object(l.a)({},e,{summary:Object(l.a)({},t.payload)});default:return e}var a}var oe=o.a.createContext(ae),re=(a(101),{asce:1,desc:-1});function ce(e){var t=e.dispatch,a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)([]),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)("default"),_=Object(i.a)(p,2),b=_[0],f=_[1],E=b.split(":"),v=Object(i.a)(E,2),h=v[0],k=v[1],g=Object(D.a)(c),O=Object(n.useContext)(oe);Object(n.useEffect)((function(){l(e.list),d(e.list)}),[e.list]);if("default"===h)g=c||[];else{var y=re[k]||1;g=c.sort((function(e,t){return(e[h]-t[h])*y}))}var j=O.showPostion,S=O.summary;return o.a.createElement("div",{className:"stock-list-wrap"},o.a.createElement("div",{className:"tools-box"},o.a.createElement("div",{className:"sort-tool"},o.a.createElement("select",{onChange:function(e){f(e.target.value)}},o.a.createElement("option",{value:"default"},"\u9ed8\u8ba4\u6392\u5e8f"),o.a.createElement("option",{value:"earnRate:asce"},"\u76c8\u4e8f\u4ece\u4f4e\u5230\u9ad8\u2b06"),o.a.createElement("option",{value:"earnRate:desc"},"\u76c8\u4e8f\u4ece\u9ad8\u5230\u4f4e\u2b07"),o.a.createElement("option",{value:"percent:asce"},"\u6da8\u5e45\u4ece\u4f4e\u5230\u9ad8\u2b06"),o.a.createElement("option",{value:"percent:desc"},"\u6da8\u5e45\u4ece\u9ad8\u5230\u4f4e\u2b07"))),o.a.createElement("div",{className:"position-tool",onClick:function(){return function(a){if("edit"===a&&t({type:"SET",payload:{showPostion:!O.showPostion,isEdit:!0}}),"save"===a){var n=Object(L.b)(ce.core.stocks);localStorage.setItem("stocks",JSON.stringify(n)),e.onSave&&e.onSave(),t({type:"SAVE"})}}(j?"save":"edit")}},o.a.createElement("span",null,j?"\u4fdd\u5b58":"".concat(c.length<=0?"\u6dfb\u52a0":"\u4fee\u6539","\u6301\u4ed3")),o.a.createElement("img",{src:J.a,alt:"save",style:{display:j?"block":"none"}}),o.a.createElement("img",{src:W.a,alt:"edit",style:{display:j?"none":"block"}}))),j&&o.a.createElement(te,{core:function(e){return ce.core=e},stocks:u||c||[],onItemComplete:function(e,t){console.log("\u7f16\u8f91",e,t)},onAdd:function(e){d(e)},onDelete:function(e){var t=ce.core.stocks.filter((function(t){return String(t.symbol)!==String(e.symbol)}));d(Object(D.a)(t)),ce.core.stocks=t}}),o.a.createElement("div",{className:"stock-list flow"},g.map((function(e){return o.a.createElement(B,{key:e.symbol,data:e,summary:S})}))))}var le=Object(s.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},panel:{padding:"8px 18px 24px"}}}));function ie(e){var t,a=le(),n=o.a.useState("panel2"),r=Object(i.a)(n,2),c=r[0],l=r[1],s=e.map,m=e.list,u=e.onSave,d=e.dispatch;return o.a.createElement(C.a,{expanded:"panel2"===c,onChange:(t="panel2",function(e,a){l(!!a&&t)})},o.a.createElement(x.a,{expandIcon:o.a.createElement(M.a,null),"aria-controls":"panel2bh-content",id:"panel2bh-header"},o.a.createElement(R.a,{className:a.heading},"\u6301\u4ed3")),o.a.createElement(w.a,{className:a.panel},o.a.createElement(ce,{map:s,list:m,onSave:u,dispatch:d})))}var se=Object(s.a)((function(e){return{panel:{display:"block"},detial:{display:"block"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},defaultColor:{color:"#888"}}}));function me(e){var t,a,n=se(),r=o.a.useState("panel1"),c=Object(i.a)(r,2),l=c[0],s=c[1],m=e.summary,u=void 0===m?{}:m,d=e.list,p=void 0===d?[]:d;return o.a.createElement(C.a,{className:n.haha,expanded:"panel1"===l,onChange:(a="panel1",function(e,t){s(!!t&&a)})},o.a.createElement(x.a,{expandIcon:o.a.createElement(M.a,null),"aria-controls":"panel2bh-content",id:"panel2bh-header"},o.a.createElement(R.a,{className:n.heading},"\u603b\u89c8")),o.a.createElement(w.a,{className:n.detial},p.length<=0?o.a.createElement(o.a.Fragment,null,o.a.createElement(R.a,{display:"inline",color:"error"},"\u8bf7\u5148\u6dfb\u52a0\u6301\u4ed3\uff0c\u624d\u80fd\u67e5\u770b\u603b\u89c8\u3002"),o.a.createElement(R.a,{display:"inline",className:n.defaultColor,variant:"body1"},"\u6216\u8005\u70b9\u51fb\u4e0a\u65b9\u7684RESET\u6309\u94ae,\u53c2\u770b\u793a\u4f8b\u6570\u636e\u3002")):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.a,{display:"block",paragraph:!0},o.a.createElement("span",null,"\u4f60\u6301\u4ed3\u7684\u603b\u5e02\u503c\u4e3a",u.marketValue,"\u3002"),o.a.createElement("span",null,"\u603b\u6210\u672c\u4e3a",u.costValue,"\u3002"),o.a.createElement("span",null,"\u76ee\u524d",u.earnMoney>=0?"\u76c8\u5229":"\u4e8f\u635f"," ",Math.abs(u.earnMoney),"\u5143\u3002"),o.a.createElement("span",null,"\u76c8\u4e8f\u7387\uff1a",(100*u.earnRate).toFixed(2),"%\u3002")),Object.keys(u.advice||{}).length>0&&o.a.createElement(R.a,{display:"block",color:"error"},"\u5efa\u8bae\u8d26\u6237\u4fdd\u7559\u6d41\u52a8\u8d44\u91d1",null===(t=u.advice)||void 0===t?void 0:t.hotMoney,"\u5143\uff0c\u4ee5\u5e94\u5bf9\u98ce\u9669\u3002"))))}var ue=a(28),de=window.$,pe=Object(s.a)((function(e){return{root:{width:"100%"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20,marginBottom:20,"& .title-box":{marginTop:0,marginBottom:0},"& .import-tool":{cursor:"pointer",color:"#888",fontSize:14}}}})),_e=null;function be(){var e=pe(),t=Object(n.useState)({}),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)([]),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)({}),_=Object(i.a)(p,2),b=_[0],f=_[1],E=Object(n.useReducer)(ne,ae),v=Object(i.a)(E,2),k=v[0],g=v[1],O=Object(n.useRef)(k);function y(){var e=localStorage.getItem("stocks"),t=e?JSON.parse(e):[],a=t.map((function(e){return String(e.symbol)})),n=O.current.isEdit;if(t.length<=0)return c({}),d([]),void f({});de&&!n&&de.ajax({type:"GET",dataType:"jsonp",url:"".concat(ue.b).concat(Object(L.c)(a).join(",")),success:function(e,t,a){var n=Object(L.e)(e),o=Object(L.a)(n);g({type:"SET_SUMMARY",payload:o}),c(e),d(n),f(o)},error:function(e){console.error("\u8bf7\u6c42\u63a5\u53e3\u9519\u8bef")}})}return Object(n.useEffect)((function(){return Object(L.d)(),y(),_e=setInterval((function(){y()}),ue.e),function(){clearInterval(_e)}}),[]),O.current=k,o.a.createElement(oe.Provider,{value:k},o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.header},o.a.createElement("h2",{className:"title-box"},"STOCK HELPER",o.a.createElement(h,{onConfirm:function(){g({type:"SAVE"}),O.current=Object(l.a)({},k,{showPostion:!1,isEdit:!1}),Object(L.f)(),y()}})),o.a.createElement("div",{className:"import-tool"},o.a.createElement(N,{onConfirm:function(e){console.log("handleImportConfirm",e),e&&(g({type:"SAVE"}),O.current=Object(l.a)({},k,{showPostion:!1,isEdit:!1}),Object(L.f)(e),y())}}))),o.a.createElement(me,{map:r,list:u,summary:b}),o.a.createElement(ie,{map:r,list:u,onSave:function(){y()},dispatch:g})))}a(102);window.addEventListener("error",(function(e){console.error("addEventListener error",e),!0===window.confirm("\u6570\u636e\u9519\u8bef\uff0c\u5c06\u91cd\u7f6e\u6570\u636e\u3002\n".concat(e.message))&&(Object(L.f)(),window.location.reload())}));var fe=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(be,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getStockCodes})),__webpack_require__.d(__webpack_exports__,"b",(function(){return formatToLocalStocks})),__webpack_require__.d(__webpack_exports__,"d",(function(){return initData})),__webpack_require__.d(__webpack_exports__,"f",(function(){return resetData})),__webpack_require__.d(__webpack_exports__,"e",(function(){return mergeStocks})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calcStockSummary}));var _Users_ling_3l_workspace_stock_helper_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41),_Users_ling_3l_workspace_stock_helper_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),big_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(36),big_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(big_js__WEBPACK_IMPORTED_MODULE_2__),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(28);function getStockCodes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return isNaN(e[0])?e.toLowerCase().indexOf("us_")>-1?e.toUpperCase():e.indexOf("hk")>-1?e:e.toLowerCase().replace("sz","1").replace("sh","0"):("6"===e[0]?"0":"1")+e}))}function genFnForBC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.bcFn="((".concat(e.position,"+x)").concat(e.price,")/(").concat(e.costPrice,"*").concat(e.position," + ").concat(e.price,"x)"),e}))}function soryBy(e,t){}function calcFnResult(){for(var formula=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",targetValue=arguments.length>1?arguments[1]:void 0,ratio=100,i=1,flag=!0,realValue=targetValue;flag;){var formulaStr=formula.replace(/x/g,"*".concat(ratio*i)),result=eval(formulaStr);result<=targetValue?(realValue=result,flag=!1):i++,i>100&&(flag=!1)}return{x:ratio*i,y:realValue,targetValue:targetValue,realValue:realValue}}function formatToLocalStocks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{name:e.name,symbol:e.symbol,costPrice:e.costPrice,position:e.position}}))}function initData(){if(localStorage.getItem("pageView")){var e=localStorage.getItem("pageView");localStorage.setItem("pageView",Number(e)+1)}else localStorage.setItem("stocks",JSON.stringify(_constants__WEBPACK_IMPORTED_MODULE_3__.d)),localStorage.setItem("pageView",1)}function resetData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_constants__WEBPACK_IMPORTED_MODULE_3__.d;localStorage.setItem("stocks",JSON.stringify(e))}function mergeStocks(e){var t=localStorage.getItem("stocks"),a=t?JSON.parse(t):[],n=Object.values(e).reduce((function(e,t){return e[t.symbol]=t,e}),{}),o=a.map((function(e){if(n[e.symbol]){var t=Object(_Users_ling_3l_workspace_stock_helper_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e,{},n[e.symbol]),a={},o=t.costPrice,r=t.price,c=t.position;return o>r?t.bcFn="1-(".concat((c*r).toFixed(2),"+").concat(r,"x)/(").concat((o*c).toFixed(2),"+").concat(r,"x)"):t.jcFn="(".concat((c*r).toFixed(2),"+").concat(r,"x)/(").concat((o*c).toFixed(2),"+").concat(r,"x)-1"),t.earnRate=r/o-1,t.earnRate<_constants__WEBPACK_IMPORTED_MODULE_3__.a&&((a=calcFnResult(t.bcFn,-_constants__WEBPACK_IMPORTED_MODULE_3__.c)).amount=(a.x*t.price).toFixed(2)),t.advice=a,t}return e}));return Object(_Users_ling_3l_workspace_stock_helper_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(o)}function calcStockSummary(e){var t={marketValue:0,costValue:0,earnMoney:0,earnRate:0,advice:{hotMoney:0},earn:{minRate:0,maxRate:0,minMoney:0,maxMoney:0,maxAbsRate:0}};if((t=e.reduce((function(e,t){var a=t.advice?t.advice.amount:0;return e.marketValue=new big_js__WEBPACK_IMPORTED_MODULE_2___default.a(t.price).times(t.position).plus(e.marketValue).valueOf(),e.costValue=new big_js__WEBPACK_IMPORTED_MODULE_2___default.a(t.costPrice).times(t.position).plus(e.costValue).valueOf(),e.advice.hotMoney=new big_js__WEBPACK_IMPORTED_MODULE_2___default.a(e.advice.hotMoney).plus(Number(a||0)).valueOf(),e}),t)).earnRate=new big_js__WEBPACK_IMPORTED_MODULE_2___default.a(t.marketValue).div(t.costValue).minus(1).toFixed(4).valueOf(),t.earnMoney=new big_js__WEBPACK_IMPORTED_MODULE_2___default.a(t.marketValue).minus(t.costValue).valueOf(),e&&e.length>0){var a=e.sort((function(e,t){return e.earnRate-t.earnRate})),n=a[0],o=a[a.length-1];t.earn.minRate=n.earnRate,t.earn.maxRate=o.earnRate,t.earn.minMoney=(n.earnRate*n.costPrice*n.position).toFixed(2),t.earn.maxMoney=(o.earnRate*o.costPrice*o.position).toFixed(2),t.earn.maxAbsRate=Math.max(Math.abs(n.earnRate),Math.abs(o.earnRate))}return console.log("summary",t),t}},28:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return l}));var n="https://api.money.126.net/data/feed/",o=3e3,r=-.06,c=-.059,l=[{name:"\u4f0a\u5229\u80a1\u4efd",symbol:"600887",costPrice:30.243,position:400},{name:"\u4e2d\u56fd\u5e73\u5b89",symbol:"601318",costPrice:77.987,position:200},{name:"\u683c\u529b\u7535\u5668",symbol:"000651",costPrice:60.625,position:200},{name:"\u4e1c\u5c71\u7cbe\u5bc6",symbol:"002384",costPrice:28.213,position:400},{name:"\u534e\u5929\u79d1\u6280",symbol:"002185",costPrice:12.87,position:100},{name:"\u534e\u65b0\u6c34\u6ce5",symbol:"600801",costPrice:23.813,position:400},{name:"\u6d77\u87ba\u6c34\u6ce5",symbol:"600585",costPrice:51.851,position:100}]},65:function(e,t,a){},68:function(e,t,a){e.exports=a.p+"static/media/edit-icon.47681e14.svg"},69:function(e,t,a){e.exports=a.p+"static/media/save-icon.c5e730ea.svg"},70:function(e,t,a){e.exports=a.p+"static/media/delete-icon.7d8cde5e.svg"},71:function(e,t,a){e.exports=a.p+"static/media/add-icon.4f995bf3.svg"},89:function(e,t,a){e.exports=a(103)},94:function(e,t,a){},99:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.d28fea58.chunk.js.map