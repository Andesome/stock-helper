(this["webpackJsonpstock-helper"]=this["webpackJsonpstock-helper"]||[]).push([[0],[,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";function getStockCodes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return isNaN(e[0])?e.toLowerCase().indexOf("us_")>-1?e.toUpperCase():e.indexOf("hk")>-1?e:e.toLowerCase().replace("sz","1").replace("sh","0"):("6"===e[0]?"0":"1")+e}))}function genFnForBC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.bcFn="((".concat(e.position,"+x)").concat(e.price,")/(").concat(e.costPrice,"*").concat(e.position," + ").concat(e.price,"x)"),e}))}function soryBy(e,t){}function calcFnResult(){for(var formula=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",targetValue=arguments.length>1?arguments[1]:void 0,ratio=100,i=1,flag=!0,realValue=targetValue;flag;){var formulaStr=formula.replace(/x/g,"*".concat(ratio*i)),result=eval(formulaStr);result<=targetValue?(realValue=result,flag=!1):i++,i>100&&(flag=!1)}return{x:ratio*i,targetValue:targetValue,realValue:realValue}}__webpack_require__.d(__webpack_exports__,"b",(function(){return getStockCodes})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calcFnResult}))},,,,function(e,t,a){e.exports=a.p+"static/media/edit-icon.47681e14.svg"},,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),o=a(11),r=a.n(o),s=(a(19),a(13)),i=a(9),l=a(6),u=a(1),m=a(2),d=a(4),p=a(3),v=a(5),h=a(8),k=[{name:"\u4f0a\u5229\u80a1\u4efd",code:"600887",costPrice:30.243,position:400},{name:"\u4e2d\u56fd\u5e73\u5b89",code:"601318",costPrice:77.987,position:200},{name:"\u683c\u529b\u7535\u5668",code:"000651",costPrice:60.625,position:200},{name:"\u4e1c\u5c71\u7cbe\u5bc6",code:"002384",costPrice:28.213,position:400},{name:"\u534e\u5929\u79d1\u6280",code:"002185",costPrice:12.87,position:100},{name:"\u534e\u65b0\u6c34\u6ce5",code:"600801",costPrice:23.813,position:400},{name:"\u6d77\u87ba\u6c34\u6ce5",code:"600585",costPrice:51.851,position:100}];a(20);function f(e){return e>0?"red":e<0?"green":"default"}var b=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"handleLinkClick",value:function(e){var t=function(e){var t=[{type:0,eq:e.bcFn,color:"#13AD13"},{type:1e3,window:["-200","1500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],a=[{type:0,eq:e.jcFn,color:"#ED1717"},{type:1e3,window:["-100","500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],c=e.costPrice>e.price?t:a,n=window.btoa(JSON.stringify(c)).replace(/=/g,"-");return"http://fooplot.com/#".concat(n)}(e);window.open(t,e.name)}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.price-t.costPrice,c=f(a),o={};return a<0&&t.earnRate<=-.059&&(o=Object(h.a)(t.bcFn,.03)),n.a.createElement("div",{className:"stock-item"},n.a.createElement("h3",null,t.name),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},a<0?"\u8865\u4ed3\u51fd\u6570":"\u52a0\u4ed3\u51fd\u6570",":"),n.a.createElement("span",{className:"stock-item-value link",onClick:function(){e.handleLinkClick(t)}},a<0?t.bcFn:t.jcFn)),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u76c8\u4e8f:"),n.a.createElement("span",{className:"stock-item-value ".concat(c)},(100*t.earnRate).toFixed(3),"%")),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u6210\u672c:"),n.a.createElement("span",{className:"stock-item-value"},t.costPrice)),n.a.createElement("div",{className:"white-blank"}),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u73b0\u4ef7:"),n.a.createElement("span",{className:"stock-item-value"},t.price)),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u6da8\u5e45:"),n.a.createElement("span",{className:"stock-item-value ".concat(f(t.percent))},(100*t.percent).toFixed(2),"%")),n.a.createElement("div",{className:"white-blank"}),o.x&&n.a.createElement("div",{className:"stock-spc-item advice-item"},n.a.createElement("label",{className:"stock-item-label"},"\u5efa\u8bae:"),n.a.createElement("span",{className:"stock-item-value advice-value"},"\u76ee\u524d\u60a8\u7684\u4e8f\u635f\u8d85\u8fc7\u4e86",Math.floor(100*Math.abs(t.earnRate)),"%\u3002\u5efa\u8bae\u8865\u4ed3",n.a.createElement("b",{className:"mark"},o.x),"\u624b\uff0c \u9700\u8981\u8d44\u91d1",n.a.createElement("b",{className:"mark"},"\xa5",Math.ceil(t.price*o.x)),", \u53ef\u5c06\u4e8f\u635f\u964d\u81f3",n.a.createElement("b",{className:"mark"},(100*o.realValue).toFixed(3),"%"),"\u3002")))}}]),t}(c.Component),E=a(12),g=a.n(E),N=a(7),j=(a(21),{name:{required:!0},code:{required:!0},costPrice:{required:!0},postion:{required:!0}}),w=function(e){function t(){var e,a;Object(u.a)(this,t);for(var c=arguments.length,n=new Array(c),o=0;o<c;o++)n[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={stock:{}},a.handleInputChange=function(e,t){var c=a.state.stock;console.log("e",t.target.value),a.setState({stock:Object(l.a)({},c,Object(N.a)({},e,String(t.target.value).replace(/\s/g,"")))},(function(){var e=a.props.onComplete,t=a.validateShema();t&&e(Object(l.a)({},a.state.stock)),console.log("isValid",t)}))},a.validateShema=function(){var e=a.state.stock;return Object.keys(j).every((function(t){var a=j[t];return e[t]?!a.required||e[t]:!a.required}))},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.edit,c=void 0!==a&&a,o=t.data,r=void 0===o?{}:o;return n.a.createElement("div",{className:"postion-item-box"},c?n.a.createElement("div",{className:"position-edit-item"},n.a.createElement("div",{className:"col stock-name"},n.a.createElement("input",{type:"text",placeholder:"[\u53ef\u586b]\u540d\u79f0",onChange:function(t){return e.handleInputChange("name",t)}})),n.a.createElement("div",{className:"col stock-code"},n.a.createElement("input",{type:"text",placeholder:"* \u4ee3\u7801",onChange:function(t){return e.handleInputChange("code",t)}})),n.a.createElement("div",{className:"col stock-cost-price"},n.a.createElement("input",{type:"number",placeholder:"* \u6210\u672c",onChange:function(t){return e.handleInputChange("costPrice",t)}})),n.a.createElement("div",{className:"col stock-postion"},n.a.createElement("input",{type:"number",placeholder:"* \u6301\u4ed3(\u80a1)",onChange:function(t){return e.handleInputChange("postion",t)}}))):n.a.createElement("div",{className:"position-show-item"},n.a.createElement("div",{className:"col stock-name"},r.name),n.a.createElement("div",{className:"col stock-code"},r.code),n.a.createElement("div",{className:"col stock-cost-price"},r.costPrice),n.a.createElement("div",{className:"col stock-postion"},r.position)))}}]),t}(c.Component),y=(a(22),function(e){function t(){var e,a;Object(u.a)(this,t);for(var c=arguments.length,n=new Array(c),o=0;o<c;o++)n[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleComplete=function(e){var t=a.props.stocks,c=void 0===t?[]:t;a.stocks=c,c.reduce((function(e,t){return e[t.code]=t,e}),{})[e.code]?alert("\u8be5\u80a1\u7968\u5df2\u5b58\u5728\u4e86\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4fee\u6539~"):a.stocks.push(e)},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.stocks,a=void 0===t?[]:t,c=e.core;this.stocks=a,c&&c(this)}},{key:"render",value:function(){var e=this,t=this.props.stocks;return n.a.createElement("div",{className:"stocks-list-wrap"},n.a.createElement("div",{className:"postion-list-header"},n.a.createElement("div",{className:"th"},"\u540d\u79f0"),n.a.createElement("div",{className:"th"},"\u4ee3\u7801"),n.a.createElement("div",{className:"th"},"\u6210\u672c"),n.a.createElement("div",{className:"th"},"\u6301\u4ed3")),t.map((function(t){return n.a.createElement(w,{key:t.code,data:t,onComplete:e.handleComplete})})))}}]),t}(c.Component)),O=(a(23),window.$),C={asce:1,desc:-1},_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setSotcks=function(e){var t=Object.values(e).reduce((function(e,t){return e[t.symbol]=t,e}),{}),c=k.map((function(e){if(t[e.code]){var a=Object(l.a)({},e,{},t[e.code]),c=a.costPrice,n=a.price,o=a.position;return c>n?a.bcFn="1-(".concat((o*n).toFixed(2),"+").concat(n,"x)/(").concat(c,"*").concat(o,"+").concat(n,"x)"):a.jcFn="(".concat((o*n).toFixed(2),"+").concat(n,"x)/(").concat(c,"*").concat(o,"+").concat(n,"x)-1"),a.earnRate=n/c-1,a}return e}));a.stocks=Object(i.a)(c),a.setState({stocks:c})},a.handleSortChange=function(e){a.setState({sort:e.target.value})},a.hanldPostionClick=function(e){console.log("click",e),a.setState({showPostion:!a.state.showPostion}),"save"===e&&console.log("\u6301\u4ed3",a.core.stocks)},a.state={stocks:[],sort:"default",showPostion:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchStocks(),setInterval((function(){e.fetchStocks()}),3e3)}},{key:"componentWillUnmount",value:function(){clearInterval(null)}},{key:"fetchStocks",value:function(){var e=k.map((function(e){return String(e.code)})),t=this;O&&O.ajax({type:"GET",dataType:"jsonp",url:"".concat("https://api.money.126.net/data/feed/").concat(Object(h.b)(e).join(",")),success:function(e,a,c){t.setSotcks(e)},error:function(e){console.error("\u8bf7\u6c42\u63a5\u53e3\u9519\u8bef")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.stocks,c=t.sort,o=t.showPostion,r=c.split(":"),l=Object(s.a)(r,2),u=l[0],m=l[1],d=Object(i.a)(a);if("default"===u)d=this.stocks||[];else{var p=C[m]||1;d=a.sort((function(e,t){return(e[u]-t[u])*p}))}return n.a.createElement("div",{className:"stock-list-wrap"},n.a.createElement("h2",null,"STOCK HELPER"),n.a.createElement("div",{className:"tools-box"},n.a.createElement("div",{className:"sort-tool"},"sort by",n.a.createElement("select",{onChange:this.handleSortChange},n.a.createElement("option",{value:"default"},"default"),n.a.createElement("option",{value:"earnRate:asce"},"\u76c8\u4e8f\u2b06"),n.a.createElement("option",{value:"earnRate:desc"},"\u76c8\u4e8f\u2b07"))),n.a.createElement("div",{className:"position-tool",onClick:function(){return e.hanldPostionClick(o?"save":"edit")}},n.a.createElement("span",null,o?"\u4fdd\u5b58":"\u6301\u4ed3"),n.a.createElement("img",{src:g.a,alt:"edit-icon"}))),o&&n.a.createElement(y,{core:function(t){return e.core=t},stocks:this.stocks||[]}),n.a.createElement("div",null,d.map((function(e){return n.a.createElement(b,{key:e.code,data:e})}))))}}]),t}(c.Component);a(24);var x=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.cfe308f7.chunk.js.map