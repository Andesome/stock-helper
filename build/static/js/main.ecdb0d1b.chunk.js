(this["webpackJsonpstock-helper"]=this["webpackJsonpstock-helper"]||[]).push([[0],[,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s}));var n="https://api.money.126.net/data/feed/",c=3e3,o=.03,s=[{name:"\u4f0a\u5229\u80a1\u4efd",symbol:"600887",costPrice:30.243,position:400},{name:"\u4e2d\u56fd\u5e73\u5b89",symbol:"601318",costPrice:77.987,position:200},{name:"\u683c\u529b\u7535\u5668",symbol:"000651",costPrice:60.625,position:200},{name:"\u4e1c\u5c71\u7cbe\u5bc6",symbol:"002384",costPrice:28.213,position:400},{name:"\u534e\u5929\u79d1\u6280",symbol:"002185",costPrice:12.87,position:100},{name:"\u534e\u65b0\u6c34\u6ce5",symbol:"600801",costPrice:23.813,position:400},{name:"\u6d77\u87ba\u6c34\u6ce5",symbol:"600585",costPrice:51.851,position:100}]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getStockCodes})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calcFnResult})),__webpack_require__.d(__webpack_exports__,"b",(function(){return formatToLocalStocks})),__webpack_require__.d(__webpack_exports__,"d",(function(){return initData}));var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function getStockCodes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return isNaN(e[0])?e.toLowerCase().indexOf("us_")>-1?e.toUpperCase():e.indexOf("hk")>-1?e:e.toLowerCase().replace("sz","1").replace("sh","0"):("6"===e[0]?"0":"1")+e}))}function genFnForBC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.bcFn="((".concat(e.position,"+x)").concat(e.price,")/(").concat(e.costPrice,"*").concat(e.position," + ").concat(e.price,"x)"),e}))}function soryBy(e,t){}function calcFnResult(){for(var formula=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",targetValue=arguments.length>1?arguments[1]:void 0,ratio=100,i=1,flag=!0,realValue=targetValue;flag;){var formulaStr=formula.replace(/x/g,"*".concat(ratio*i)),result=eval(formulaStr);result<=targetValue?(realValue=result,flag=!1):i++,i>100&&(flag=!1)}return{x:ratio*i,targetValue:targetValue,realValue:realValue}}function formatToLocalStocks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{name:e.name,symbol:e.symbol,costPrice:e.costPrice,position:e.position}}))}function initData(){if(localStorage.getItem("pageView")){var e=localStorage.getItem("pageView");localStorage.setItem("pageView",Number(e)+1)}else localStorage.setItem("stocks",JSON.stringify(_constants__WEBPACK_IMPORTED_MODULE_0__.c)),localStorage.setItem("pageView",1)}},,,,,,function(e,t,a){e.exports=a.p+"static/media/edit-icon.47681e14.svg"},function(e,t,a){e.exports=a.p+"static/media/save-icon.c5e730ea.svg"},function(e,t,a){e.exports=a.p+"static/media/delete-icon.7d8cde5e.svg"},function(e,t,a){e.exports=a.p+"static/media/add-icon.4f995bf3.svg"},,function(e,t,a){e.exports=a(29)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(12),s=a.n(o),r=(a(23),a(17)),i=a(10),l=a(8),m=a(1),u=a(2),d=a(4),p=a(3),f=a(5),h=a(7),v=a(6);a(24);function k(e){return e>0?"red":e<0?"green":"default"}var b=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleLinkClick",value:function(e){var t=function(e){var t=[{type:0,eq:e.bcFn,color:"#13AD13"},{type:1e3,window:["-200","1500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],a=[{type:0,eq:e.jcFn,color:"#ED1717"},{type:1e3,window:["-100","500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],n=e.costPrice>e.price?t:a,c=window.btoa(JSON.stringify(n)).replace(/=/g,"-");return"http://fooplot.com/#".concat(c)}(e);window.open(t,e.name)}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.price-t.costPrice,n=k(a),o={};return a<0&&t.earnRate<=-.059&&(o=Object(h.a)(t.bcFn,v.b)),c.a.createElement("div",{className:"stock-item"},c.a.createElement("h3",null,t.name),c.a.createElement("div",{className:"stock-spc-item"},c.a.createElement("label",{className:"stock-item-label"},a<0?"\u8865\u4ed3\u51fd\u6570":"\u52a0\u4ed3\u51fd\u6570",":"),c.a.createElement("span",{className:"stock-item-value link",onClick:function(){e.handleLinkClick(t)}},a<0?t.bcFn:t.jcFn)),c.a.createElement("div",{className:"stock-spc-item"},c.a.createElement("label",{className:"stock-item-label"},"\u76c8\u4e8f:"),c.a.createElement("span",{className:"stock-item-value ".concat(n)},(100*t.earnRate).toFixed(3),"%")),c.a.createElement("div",{className:"stock-spc-item"},c.a.createElement("label",{className:"stock-item-label"},"\u6210\u672c:"),c.a.createElement("span",{className:"stock-item-value"},t.costPrice)),c.a.createElement("div",{className:"white-blank"}),c.a.createElement("div",{className:"stock-spc-item"},c.a.createElement("label",{className:"stock-item-label"},"\u73b0\u4ef7:"),c.a.createElement("span",{className:"stock-item-value"},t.price)),c.a.createElement("div",{className:"stock-spc-item"},c.a.createElement("label",{className:"stock-item-label"},"\u6da8\u5e45:"),c.a.createElement("span",{className:"stock-item-value ".concat(k(t.percent))},(100*t.percent).toFixed(2),"%")),c.a.createElement("div",{className:"white-blank"}),o.x&&c.a.createElement("div",{className:"stock-spc-item advice-item"},c.a.createElement("label",{className:"stock-item-label"},"\u5efa\u8bae:"),c.a.createElement("span",{className:"stock-item-value advice-value"},"\u76ee\u524d\u60a8\u7684\u4e8f\u635f\u8d85\u8fc7\u4e86",Math.floor(100*Math.abs(t.earnRate)),"%\u3002\u5efa\u8bae\u8865\u4ed3",c.a.createElement("b",{className:"mark"},o.x),"\u624b\uff0c \u9700\u8981\u8d44\u91d1",c.a.createElement("b",{className:"mark"},"\xa5",Math.ceil(t.price*o.x)),", \u53ef\u5c06\u4e8f\u635f\u964d\u81f3",c.a.createElement("b",{className:"mark"},(100*o.realValue).toFixed(3),"%"),"\u3002")))}}]),t}(n.Component),g=a(13),E=a.n(g),_=a(14),y=a.n(_),N=a(9),w=a(15),O=a.n(w),S=(a(25),{name:{required:!1},symbol:{required:!0},costPrice:{required:!0,min:1},position:{required:!0,min:100}}),C=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={stock:{}},a.handleInputChange=function(e,t){var n=a.state.stock;a.setState({stock:Object(l.a)({},n,Object(N.a)({},e,String(t.target.value).replace(/\s/g,"")))},(function(){var e=a.props.onComplete;a.validateShema()&&e(Object(l.a)({},a.state.stock))}))},a.validateShema=function(){var e=a.state.stock;return Object.keys(S).every((function(t){var a=S[t];return e[t]?!a.required||e[t]:!a.required}))},a.onDelete=function(e){var t=a.props,n=t.onDelete,c=t.data;n&&n(c,e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.edit,n=void 0!==a&&a,o=t.data,s=void 0===o?{}:o;return c.a.createElement("div",{className:"postion-item-box"},n?c.a.createElement("div",{className:"position-edit-item"},c.a.createElement("div",{className:"col stock-name"},c.a.createElement("input",{type:"text",defaultValue:s.name||"",placeholder:"[\u53ef\u586b]\u540d\u79f0",onChange:function(t){return e.handleInputChange("name",t)}})),c.a.createElement("div",{className:"col stock-code"},c.a.createElement("input",{type:"text",defaultValue:s.symbol||"",placeholder:"* \u4ee3\u7801",onChange:function(t){return e.handleInputChange("symbol",t)}})),c.a.createElement("div",{className:"col stock-cost-price"},c.a.createElement("input",{type:"number",defaultValue:s.costPrice||"",placeholder:"* \u6210\u672c",onChange:function(t){return e.handleInputChange("costPrice",t)}})),c.a.createElement("div",{className:"col stock-postion"},c.a.createElement("input",{type:"number",defaultValue:s.position||"",placeholder:"* \u6301\u4ed3(\u80a1)",onChange:function(t){return e.handleInputChange("position",t)}}))):c.a.createElement("div",{className:"position-show-item"},c.a.createElement("div",{className:"col stock-name"},s.name),c.a.createElement("div",{className:"col stock-code"},s.symbol),c.a.createElement("div",{className:"col stock-cost-price"},s.costPrice),c.a.createElement("div",{className:"col stock-postion"},c.a.createElement("span",null,s.position),c.a.createElement("img",{className:"delete-btn",src:O.a,alt:"delete",onClick:this.onDelete}))))}}]),t}(n.Component),j=a(16),x=a.n(j),P=(a(26),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).handleComplete=function(e,t){var n=a.props,c=n.stocks,o=void 0===c?[]:c,s=n.onItemComplete,r=o.reduce((function(e,t,a){return t.index=a,e[t.symbol]=t,e}),{});Object.values(r).filter((function(t){return String(t.symbol)===String(e.symbol)})).length>1?alert("\u8be5\u80a1\u7968\u5df2\u5b58\u5728\u4e86\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4fee\u6539~"):(e.index=t,r[e.symbol]=e,a.stocks=Object.values(r).sort((function(e,t){return e.index-t.index})),s&&s(e,a.stocks))},a.handleAddRowClick=function(){var e=a.props.onAdd;if(a.stocks.length<=0)alert("\u4f60\u8fd8\u6709\u586b\u5199\u7684\u6570\u636e");else{var t=a.stocks.slice(a.stocks.length-1)[0];!t.type&&t.symbol&&t.costPrice&&t.position?e&&e(a.stocks):alert("\u4f60\u8fd8\u6709\u586b\u5199\u7684\u6570\u636e")}},a.onDelete=function(e){var t=a.props.onDelete;t&&t(e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.stocks,a=void 0===t?[]:t,n=e.core;this.stocks=a,n&&n(this)}},{key:"render",value:function(){var e=this,t=this.props.stocks;return c.a.createElement("div",{className:"stocks-list-wrap"},c.a.createElement("div",{className:"postion-list-header"},c.a.createElement("div",{className:"th"},"\u540d\u79f0"),c.a.createElement("div",{className:"th"},"\u4ee3\u7801"),c.a.createElement("div",{className:"th"},"\u6210\u672c"),c.a.createElement("div",{className:"th"},"\u6301\u4ed3")),t.map((function(t,a){return c.a.createElement(C,{key:t.symbol,data:t,onComplete:function(t){return e.handleComplete(t,a)},onDelete:e.onDelete})})),c.a.createElement(C,{key:t.length,data:{},edit:!0,onComplete:function(a){return e.handleComplete(a,t.length)}}),c.a.createElement("div",{className:"add-line"},c.a.createElement("div",{className:"add-line-btn",onClick:this.handleAddRowClick},c.a.createElement("img",{src:x.a,alt:"add btn"}))))}}]),t}(n.Component)),D=(a(27),window.$),I={asce:1,desc:-1},F=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setSotcks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=localStorage.getItem("stocks"),n=t?JSON.parse(t):[],c=Object.values(e).reduce((function(e,t){return e[t.symbol]=t,e}),{}),o=n.map((function(e){if(c[e.symbol]){var t=Object(l.a)({},e,{},c[e.symbol]),a=t.costPrice,n=t.price,o=t.position;return a>n?t.bcFn="1-(".concat((o*n).toFixed(2),"+").concat(n,"x)/(").concat(a,"*").concat(o,"+").concat(n,"x)"):t.jcFn="(".concat((o*n).toFixed(2),"+").concat(n,"x)/(").concat(a,"*").concat(o,"+").concat(n,"x)-1"),t.earnRate=n/a-1,t}return e}));a.stocks=Object(i.a)(o),a.setState({stocks:o})},a.handleSortChange=function(e){a.setState({sort:e.target.value})},a.hanldPostionClick=function(e){if(a.setState({showPostion:!a.state.showPostion}),"save"===e){var t=Object(h.b)(a.core.stocks);localStorage.setItem("stocks",JSON.stringify(t)),a.fetchStocks()}},a.handlePostionComplete=function(e,t){console.log("\u7f16\u8f91",e,t)},a.handleAdd=function(e){a.setState({editStocks:e})},a.handleDletePosition=function(e){var t=a.core.stocks.filter((function(t){return String(t.symbol)!==String(e.symbol)}));a.setState({editStocks:Object(i.a)(t)}),a.core.stocks=t,console.log("\u5220\u9664\u540e",e,a.core.stocks,t)},a.state={stocks:[],sort:"default",showPostion:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.d)(),this.fetchStocks(),setInterval((function(){e.fetchStocks()}),v.d)}},{key:"componentWillUnmount",value:function(){clearInterval(null)}},{key:"fetchStocks",value:function(){var e=localStorage.getItem("stocks"),t=(e?JSON.parse(e):[]).map((function(e){return String(e.symbol)})),a=this;D&&D.ajax({type:"GET",dataType:"jsonp",url:"".concat(v.a).concat(Object(h.c)(t).join(",")),success:function(e,t,n){a.setSotcks(e)},error:function(e){console.error("\u8bf7\u6c42\u63a5\u53e3\u9519\u8bef")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.stocks,n=t.sort,o=t.showPostion,s=t.editStocks,l=n.split(":"),m=Object(r.a)(l,2),u=m[0],d=m[1],p=Object(i.a)(a);if("default"===u)p=this.stocks||[];else{var f=I[d]||1;p=a.sort((function(e,t){return(e[u]-t[u])*f}))}return console.log("render editStocks",this.state),c.a.createElement("div",{className:"stock-list-wrap"},c.a.createElement("h2",null,"STOCK HELPER"),c.a.createElement("div",{className:"tools-box"},c.a.createElement("div",{className:"sort-tool"},"sort by",c.a.createElement("select",{onChange:this.handleSortChange},c.a.createElement("option",{value:"default"},"default"),c.a.createElement("option",{value:"earnRate:asce"},"\u76c8\u4e8f\u2b06"),c.a.createElement("option",{value:"earnRate:desc"},"\u76c8\u4e8f\u2b07"))),c.a.createElement("div",{className:"position-tool",onClick:function(){return e.hanldPostionClick(o?"save":"edit")}},c.a.createElement("span",null,o?"\u4fdd\u5b58":"\u6301\u4ed3"),c.a.createElement("img",{src:o?y.a:E.a,alt:"edit-icon"}))),o&&c.a.createElement(P,{core:function(t){return e.core=t},stocks:s||this.stocks||[],onItemComplete:this.handlePostionComplete,onAdd:this.handleAdd,onDelete:this.handleDletePosition}),c.a.createElement("div",null,p.map((function(e){return c.a.createElement(b,{key:e.symbol,data:e})}))))}}]),t}(n.Component);a(28);var V=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[18,1,2]]]);
//# sourceMappingURL=main.ecdb0d1b.chunk.js.map