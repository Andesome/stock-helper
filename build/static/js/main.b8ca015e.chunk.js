(this["webpackJsonpstock-helper"]=this["webpackJsonpstock-helper"]||[]).push([[0],[,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s}));var o="https://api.money.126.net/data/feed/",n=3e3,c=.03,s=[{name:"\u4f0a\u5229\u80a1\u4efd",symbol:"600887",costPrice:30.243,position:400},{name:"\u4e2d\u56fd\u5e73\u5b89",symbol:"601318",costPrice:77.987,position:200},{name:"\u683c\u529b\u7535\u5668",symbol:"000651",costPrice:60.625,position:200},{name:"\u4e1c\u5c71\u7cbe\u5bc6",symbol:"002384",costPrice:28.213,position:400},{name:"\u534e\u5929\u79d1\u6280",symbol:"002185",costPrice:12.87,position:100},{name:"\u534e\u65b0\u6c34\u6ce5",symbol:"600801",costPrice:23.813,position:400},{name:"\u6d77\u87ba\u6c34\u6ce5",symbol:"600585",costPrice:51.851,position:100}]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getStockCodes})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calcFnResult})),__webpack_require__.d(__webpack_exports__,"b",(function(){return formatToLocalStocks})),__webpack_require__.d(__webpack_exports__,"d",(function(){return initData}));var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function getStockCodes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return isNaN(e[0])?e.toLowerCase().indexOf("us_")>-1?e.toUpperCase():e.indexOf("hk")>-1?e:e.toLowerCase().replace("sz","1").replace("sh","0"):("6"===e[0]?"0":"1")+e}))}function genFnForBC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.bcFn="((".concat(e.position,"+x)").concat(e.price,")/(").concat(e.costPrice,"*").concat(e.position," + ").concat(e.price,"x)"),e}))}function soryBy(e,t){}function calcFnResult(){for(var formula=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",targetValue=arguments.length>1?arguments[1]:void 0,ratio=100,i=1,flag=!0,realValue=targetValue;flag;){var formulaStr=formula.replace(/x/g,"*".concat(ratio*i)),result=eval(formulaStr);result<=targetValue?(realValue=result,flag=!1):i++,i>100&&(flag=!1)}return{x:ratio*i,targetValue:targetValue,realValue:realValue}}function formatToLocalStocks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{name:e.name,symbol:e.symbol,costPrice:e.costPrice,position:e.position}}))}function initData(){if(localStorage.getItem("pageView")){var e=localStorage.getItem("pageView");localStorage.setItem("pageView",Number(e)+1)}else localStorage.setItem("stocks",JSON.stringify(_constants__WEBPACK_IMPORTED_MODULE_0__.c)),localStorage.setItem("pageView",1)}},,,,function(e){e.exports=JSON.parse('{"1000651":{"code":"1000651","percent":-0.022501,"high":57.6,"askvol3":5361,"askvol2":6200,"askvol5":19600,"askvol4":67900,"price":56.91,"open":55.42,"bid5":56.87,"bid4":56.88,"bid3":56.89,"bid2":56.9,"bid1":56.91,"low":55,"updown":-1.31,"type":"SZ","bidvol1":64715,"status":0,"bidvol3":28781,"bidvol2":204000,"symbol":"000651","update":"2020/03/13 15:59:58","bidvol5":17100,"bidvol4":50400,"volume":54346379,"askvol1":33300,"ask5":56.96,"ask4":56.95,"ask1":56.92,"name":"\u683c\u529b\u7535\u5668","ask3":56.94,"ask2":56.93,"arrow":"\u2193","time":"2020/03/13 15:59:54","yestclose":58.22,"turnover":3057574403.4},"1002185":{"code":"1002185","percent":0.047096,"high":13.41,"askvol3":276000,"askvol2":374400,"askvol5":668172,"askvol4":934875,"price":13.34,"open":12.2,"bid5":13.3,"bid4":13.31,"bid3":13.32,"bid2":13.33,"bid1":13.34,"low":12.2,"updown":0.6,"type":"SZ","bidvol1":1276611,"status":0,"bidvol3":103900,"bidvol2":90400,"symbol":"002185","update":"2020/03/13 15:59:58","bidvol5":170200,"bidvol4":148430,"volume":363358204,"askvol1":906254,"ask5":13.39,"ask4":13.38,"ask1":13.35,"name":"\u534e\u5929\u79d1\u6280","ask3":13.37,"ask2":13.36,"arrow":"\u2191","time":"2020/03/13 15:59:54","yestclose":12.74,"turnover":4710478971.91},"1002384":{"code":"1002384","percent":-0.036546,"high":27.77,"askvol3":106300,"askvol2":29400,"askvol5":12000,"askvol4":9800,"price":26.89,"open":25.29,"bid5":26.85,"bid4":26.86,"bid3":26.87,"bid2":26.88,"bid1":26.89,"low":25.29,"updown":-1.02,"type":"SZ","bidvol1":186775,"status":0,"bidvol3":6300,"bidvol2":83500,"symbol":"002384","update":"2020/03/13 15:59:58","bidvol5":72100,"bidvol4":24900,"volume":76860013,"askvol1":13200,"ask5":26.94,"ask4":26.93,"ask1":26.9,"name":"\u4e1c\u5c71\u7cbe\u5bc6","ask3":26.92,"ask2":26.91,"arrow":"\u2193","time":"2020/03/13 15:59:54","yestclose":27.91,"turnover":2031883880.1},"0600887":{"code":"0600887","percent":-0.010851,"high":28.57,"askvol3":62983,"askvol2":15600,"askvol5":22600,"askvol4":216700,"price":28.26,"open":27.45,"bid5":28.22,"bid4":28.23,"bid3":28.24,"bid2":28.25,"bid1":28.26,"low":27.15,"updown":-0.31,"type":"SH","symbol":"600887","status":0,"ask4":28.3,"bidvol3":60500,"bidvol2":339191,"bidvol1":46554,"update":"2020/03/13 15:59:36","bidvol5":19975,"bidvol4":23800,"yestclose":28.57,"askvol1":2200,"ask5":28.31,"volume":84007352,"ask1":28.27,"name":"\u4f0a\u5229\u80a1\u4efd","ask3":28.29,"ask2":28.28,"arrow":"\u2193","time":"2020/03/13 15:59:31","turnover":2335727469},"0601318":{"code":"0601318","percent":-0.02531,"high":75.98,"askvol3":23300,"askvol2":4900,"askvol5":6000,"askvol4":80200,"price":74.71,"open":72.14,"bid5":74.67,"bid4":74.68,"bid3":74.69,"bid2":74.7,"bid1":74.71,"low":72.1,"updown":-1.94,"type":"SH","symbol":"601318","status":0,"ask4":74.75,"bidvol3":63200,"bidvol2":680400,"bidvol1":53860,"update":"2020/03/13 15:59:36","bidvol5":216600,"bidvol4":216348,"yestclose":76.65,"askvol1":2400,"ask5":74.76,"volume":116615744,"ask1":74.72,"name":"\u4e2d\u56fd\u5e73\u5b89","ask3":74.74,"ask2":74.73,"arrow":"\u2193","time":"2020/03/13 15:59:31","turnover":8615758935},"0600801":{"code":"0600801","percent":-0.025958,"high":24.64,"askvol3":1800,"askvol2":25100,"askvol5":29500,"askvol4":3900,"price":23.64,"open":23.02,"bid5":23.6,"bid4":23.61,"bid3":23.62,"bid2":23.63,"bid1":23.64,"low":22.8,"updown":-0.63,"type":"SH","symbol":"600801","status":0,"ask4":23.72,"bidvol3":1800,"bidvol2":146400,"bidvol1":121400,"update":"2020/03/13 15:59:36","bidvol5":144700,"bidvol4":165500,"yestclose":24.27,"askvol1":1000,"ask5":23.73,"volume":26825732,"ask1":23.68,"name":"\u534e\u65b0\u6c34\u6ce5","ask3":23.71,"ask2":23.7,"arrow":"\u2193","time":"2020/03/13 15:59:31","turnover":633180929},"0600585":{"code":"0600585","percent":-0.019388,"high":55.39,"askvol3":5700,"askvol2":6000,"askvol5":5500,"askvol4":4500,"price":54.12,"open":52.5,"bid5":54.07,"bid4":54.08,"bid3":54.09,"bid2":54.1,"bid1":54.11,"low":51.87,"updown":-1.07,"type":"SH","symbol":"600585","status":0,"ask4":54.35,"bidvol3":3600,"bidvol2":20100,"bidvol1":4600,"update":"2020/03/13 15:59:36","bidvol5":10600,"bidvol4":700,"yestclose":55.19,"askvol1":28106,"ask5":54.36,"volume":38338657,"ask1":54.12,"name":"\u6d77\u87ba\u6c34\u6ce5","ask3":54.33,"ask2":54.2,"arrow":"\u2193","time":"2020/03/13 15:59:31","turnover":2050985218}}')},,,function(e,t,a){e.exports=a.p+"static/media/edit-icon.47681e14.svg"},function(e,t,a){e.exports=a.p+"static/media/save-icon.c5e730ea.svg"},function(e,t,a){e.exports=a.p+"static/media/delete-icon.7d8cde5e.svg"},function(e,t,a){e.exports=a.p+"static/media/add-icon.4f995bf3.svg"},,function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),c=a(13),s=a.n(c),l=(a(24),a(18)),i=a(10),r=a(8),m=a(1),u=a(2),d=a(4),p=a(3),v=a(5),b=a(7),k=a(6);a(25);function h(e){return e>0?"red":e<0?"green":"default"}var f=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"handleLinkClick",value:function(e){var t=function(e){var t=[{type:0,eq:e.bcFn,color:"#13AD13"},{type:1e3,window:["-200","1500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],a=[{type:0,eq:e.jcFn,color:"#ED1717"},{type:1e3,window:["-100","500","0",String(Math.abs(e.earnRate*1.5.toFixed(2)))]}],o=e.costPrice>e.price?t:a,n=window.btoa(JSON.stringify(o)).replace(/=/g,"-");return"http://fooplot.com/#".concat(n)}(e);window.open(t,e.name)}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.price-t.costPrice,o=h(a),c={};return a<0&&t.earnRate<=-.059&&(c=Object(b.a)(t.bcFn,k.b)),n.a.createElement("div",{className:"stock-item"},n.a.createElement("h3",null,t.name),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},a<0?"\u8865\u4ed3\u51fd\u6570":"\u52a0\u4ed3\u51fd\u6570",":"),n.a.createElement("span",{className:"stock-item-value link",onClick:function(){e.handleLinkClick(t)}},a<0?t.bcFn:t.jcFn)),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u76c8\u4e8f:"),n.a.createElement("span",{className:"stock-item-value ".concat(o)},(100*t.earnRate).toFixed(3),"%")),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u6210\u672c:"),n.a.createElement("span",{className:"stock-item-value"},t.costPrice)),n.a.createElement("div",{className:"white-blank"}),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u73b0\u4ef7:"),n.a.createElement("span",{className:"stock-item-value"},t.price)),n.a.createElement("div",{className:"stock-spc-item"},n.a.createElement("label",{className:"stock-item-label"},"\u6da8\u5e45:"),n.a.createElement("span",{className:"stock-item-value ".concat(h(t.percent))},(100*t.percent).toFixed(2),"%")),n.a.createElement("div",{className:"white-blank"}),c.x&&n.a.createElement("div",{className:"stock-spc-item advice-item"},n.a.createElement("label",{className:"stock-item-label"},"\u5efa\u8bae:"),n.a.createElement("span",{className:"stock-item-value advice-value"},"\u76ee\u524d\u60a8\u7684\u4e8f\u635f\u8d85\u8fc7\u4e86",Math.floor(100*Math.abs(t.earnRate)),"%\u3002\u5efa\u8bae\u8865\u4ed3",n.a.createElement("b",{className:"mark"},c.x),"\u624b\uff0c \u9700\u8981\u8d44\u91d1",n.a.createElement("b",{className:"mark"},"\xa5",Math.ceil(t.price*c.x)),", \u53ef\u5c06\u4e8f\u635f\u964d\u81f3",n.a.createElement("b",{className:"mark"},(100*c.realValue).toFixed(3),"%"),"\u3002")))}}]),t}(o.Component),g=a(14),y=a.n(g),E=a(15),_=a.n(E),w=a(9),N=a(16),S=a.n(N),O=(a(26),{name:{required:!1},symbol:{required:!0},costPrice:{required:!0,min:1},position:{required:!0,min:100}}),C=function(e){function t(){var e,a;Object(m.a)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={stock:{}},a.handleInputChange=function(e,t){var o=a.state.stock;a.setState({stock:Object(r.a)({},o,Object(w.a)({},e,String(t.target.value).replace(/\s/g,"")))},(function(){var e=a.props.onComplete;a.validateShema()&&e(Object(r.a)({},a.state.stock))}))},a.validateShema=function(){var e=a.state.stock;return Object.keys(O).every((function(t){var a=O[t];return e[t]?!a.required||e[t]:!a.required}))},a.onDelete=function(e){var t=a.props,o=t.onDelete,n=t.data;o&&o(n,e)},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.edit,o=void 0!==a&&a,c=t.data,s=void 0===c?{}:c;return n.a.createElement("div",{className:"postion-item-box"},o?n.a.createElement("div",{className:"position-edit-item"},n.a.createElement("div",{className:"col stock-name"},n.a.createElement("input",{type:"text",defaultValue:s.name||"",placeholder:"[\u53ef\u586b]\u540d\u79f0",onChange:function(t){return e.handleInputChange("name",t)}})),n.a.createElement("div",{className:"col stock-code"},n.a.createElement("input",{type:"text",defaultValue:s.symbol||"",placeholder:"* \u4ee3\u7801",onChange:function(t){return e.handleInputChange("symbol",t)}})),n.a.createElement("div",{className:"col stock-cost-price"},n.a.createElement("input",{type:"number",defaultValue:s.costPrice||"",placeholder:"* \u6210\u672c",onChange:function(t){return e.handleInputChange("costPrice",t)}})),n.a.createElement("div",{className:"col stock-postion"},n.a.createElement("input",{type:"number",defaultValue:s.position||"",placeholder:"* \u6301\u4ed3(\u80a1)",onChange:function(t){return e.handleInputChange("position",t)}}))):n.a.createElement("div",{className:"position-show-item"},n.a.createElement("div",{className:"col stock-name"},s.name),n.a.createElement("div",{className:"col stock-code"},s.symbol),n.a.createElement("div",{className:"col stock-cost-price"},s.costPrice),n.a.createElement("div",{className:"col stock-postion"},n.a.createElement("span",null,s.position),n.a.createElement("img",{className:"delete-btn",src:S.a,alt:"delete",onClick:this.onDelete}))))}}]),t}(o.Component),j=a(17),x=a.n(j),P=(a(27),function(e){function t(){var e,a;Object(m.a)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleComplete=function(e,t){var o=a.props,n=o.stocks,c=void 0===n?[]:n,s=o.onItemComplete,l=c.reduce((function(e,t,a){return t.index=a,e[t.symbol]=t,e}),{});Object.values(l).filter((function(t){return String(t.symbol)===String(e.symbol)})).length>1?alert("\u8be5\u80a1\u7968\u5df2\u5b58\u5728\u4e86\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4fee\u6539~"):(e.index=t,l[e.symbol]=e,a.stocks=Object.values(l).sort((function(e,t){return e.index-t.index})),s&&s(e,a.stocks))},a.handleAddRowClick=function(){var e=a.props.onAdd;if(a.stocks.length<=0)alert("\u4f60\u8fd8\u6709\u586b\u5199\u7684\u6570\u636e");else{var t=a.stocks.slice(a.stocks.length-1)[0];!t.type&&t.symbol&&t.costPrice&&t.position?e&&e(a.stocks):alert("\u4f60\u8fd8\u6709\u586b\u5199\u7684\u6570\u636e")}},a.onDelete=function(e){var t=a.props.onDelete;t&&t(e)},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.stocks,a=void 0===t?[]:t,o=e.core;this.stocks=a,o&&o(this)}},{key:"render",value:function(){var e=this,t=this.props.stocks;return n.a.createElement("div",{className:"stocks-list-wrap"},n.a.createElement("div",{className:"postion-list-header"},n.a.createElement("div",{className:"th"},"\u540d\u79f0"),n.a.createElement("div",{className:"th"},"\u4ee3\u7801"),n.a.createElement("div",{className:"th"},"\u6210\u672c"),n.a.createElement("div",{className:"th"},"\u6301\u4ed3")),t.map((function(t,a){return n.a.createElement(C,{key:t.symbol,data:t,onComplete:function(t){return e.handleComplete(t,a)},onDelete:e.onDelete})})),n.a.createElement(C,{key:t.length,data:{},edit:!0,onComplete:function(a){return e.handleComplete(a,t.length)}}),n.a.createElement("div",{className:"add-line"},n.a.createElement("div",{className:"add-line-btn",onClick:this.handleAddRowClick},n.a.createElement("img",{src:x.a,alt:"add btn"}))))}}]),t}(o.Component)),D=a(11),I=(a(28),window.$),F={asce:1,desc:-1},V=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setSotcks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=localStorage.getItem("stocks"),o=t?JSON.parse(t):[],n=Object.values(e).reduce((function(e,t){return e[t.symbol]=t,e}),{}),c=o.map((function(e){if(n[e.symbol]){var t=Object(r.a)({},e,{},n[e.symbol]),a=t.costPrice,o=t.price,c=t.position;return a>o?t.bcFn="1-(".concat((c*o).toFixed(2),"+").concat(o,"x)/(").concat(a,"*").concat(c,"+").concat(o,"x)"):t.jcFn="(".concat((c*o).toFixed(2),"+").concat(o,"x)/(").concat(a,"*").concat(c,"+").concat(o,"x)-1"),t.earnRate=o/a-1,t}return e}));a.stocks=Object(i.a)(c),a.setState({stocks:c})},a.handleSortChange=function(e){a.setState({sort:e.target.value})},a.hanldPostionClick=function(e){if(a.setState({showPostion:!a.state.showPostion}),"save"===e){var t=Object(b.b)(a.core.stocks);localStorage.setItem("stocks",JSON.stringify(t)),a.setSotcks(D)}},a.handlePostionComplete=function(e,t){console.log("\u7f16\u8f91",e,t)},a.handleAdd=function(e){a.setState({editStocks:e})},a.handleDletePosition=function(e){var t=a.core.stocks.filter((function(t){return String(t.symbol)!==String(e.symbol)}));a.setState({editStocks:Object(i.a)(t)}),a.core.stocks=t,console.log("\u5220\u9664\u540e",e,a.core.stocks,t)},a.state={stocks:[],sort:"default",showPostion:!1},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){Object(b.d)(),this.setSotcks(D),setInterval((function(){}),k.d)}},{key:"componentWillUnmount",value:function(){clearInterval(null)}},{key:"fetchStocks",value:function(){var e=localStorage.getItem("stocks"),t=(e?JSON.parse(e):[]).map((function(e){return String(e.symbol)})),a=this;I&&I.ajax({type:"GET",dataType:"jsonp",url:"".concat(k.a).concat(Object(b.c)(t).join(",")),success:function(e,t,o){a.setSotcks(e)},error:function(e){console.error("\u8bf7\u6c42\u63a5\u53e3\u9519\u8bef")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.stocks,o=t.sort,c=t.showPostion,s=t.editStocks,r=o.split(":"),m=Object(l.a)(r,2),u=m[0],d=m[1],p=Object(i.a)(a);if("default"===u)p=this.stocks||[];else{var v=F[d]||1;p=a.sort((function(e,t){return(e[u]-t[u])*v}))}return console.log("render editStocks",this.state),n.a.createElement("div",{className:"stock-list-wrap"},n.a.createElement("h2",null,"STOCK HELPER"),n.a.createElement("div",{className:"tools-box"},n.a.createElement("div",{className:"sort-tool"},"sort by",n.a.createElement("select",{onChange:this.handleSortChange},n.a.createElement("option",{value:"default"},"default"),n.a.createElement("option",{value:"earnRate:asce"},"\u76c8\u4e8f\u2b06"),n.a.createElement("option",{value:"earnRate:desc"},"\u76c8\u4e8f\u2b07"))),n.a.createElement("div",{className:"position-tool",onClick:function(){return e.hanldPostionClick(c?"save":"edit")}},n.a.createElement("span",null,c?"\u4fdd\u5b58":"\u6301\u4ed3"),n.a.createElement("img",{src:c?_.a:y.a,alt:"edit-icon"}))),c&&n.a.createElement(P,{core:function(t){return e.core=t},stocks:s||this.stocks||[],onItemComplete:this.handlePostionComplete,onAdd:this.handleAdd,onDelete:this.handleDletePosition}),n.a.createElement("div",null,p.map((function(e){return n.a.createElement(f,{key:e.symbol,data:e})}))))}}]),t}(o.Component);a(29);var R=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[19,1,2]]]);
//# sourceMappingURL=main.b8ca015e.chunk.js.map